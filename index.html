<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>RUMAT STUDIO ‚Äì ajattomia ja kest√§vi√§ kaavoja ja digiohjeita</title>
  <meta name="description" content="RUMAT STUDIO ‚Äì ajattomia ja kest√§vi√§ kaavoja ja digiohjeita.">
  <meta name="theme-color" content="#345563">

  <!-- Preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Peruskuvien ennakkolataus (LCP + intro-kuvat) -->
  <link rel="preload" as="image" href="assets/hero.jpg" imagesrcset="assets/hero.jpg 1280w, assets/hero@2x.jpg 1920w" imagesizes="100vw">
  <link rel="preload" as="image" href="assets/intro-left.jpg">
  <link rel="preload" as="image" href="assets/intro-right.jpg">
  <link rel="preload" as="image" href="assets/designer.jpg">

  <!-- EmailJS (defer ettei blokkaa) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" defer></script>

  <style>
    :root{
      --ink:#202020; --olive:#A1A266; --deep-blue:#345563; --ivory:#F6F6F4; --light-blue:#DEEEEE;
      --header-h:64px; --band-radius:16px;
      --intro-img-w: clamp(160px, 24vw, 260px);
      --intro-img-h: clamp(300px, 36vw, 420px);
      --safe-top: env(safe-area-inset-top,0px);
    }
    html{scroll-padding-top:var(--header-h)}
    body{font-family:Montserrat,system-ui,Segoe UI,Roboto,Arial;color:var(--ink);background:var(--ivory);margin:0;overflow-x:hidden;-webkit-tap-highlight-color:transparent}

    h1,h2,h3,h4,h5,h6{font-weight:900!important;text-transform:uppercase;color:var(--deep-blue);letter-spacing:.02em;margin:0 0 .6rem}
    .normalcase{text-transform:none!important}

    /* HEADER (kevyet kerrokset) */
    header{background:var(--ivory);border-bottom:1px solid rgba(0,0,0,.08);will-change:transform;transform:translateZ(0)}
    #hdrRow{display:grid;grid-template-columns:auto 1fr auto;align-items:center}
    #brandText{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:min(42vw,460px);color:var(--ink)}
    #mainNav{justify-self:center;display:flex;gap:1.5rem;white-space:nowrap;font-size:13px;text-transform:uppercase;letter-spacing:.2em}
    #mainNav a{color:var(--ink);text-decoration:none}
    .nav-hidden{display:none!important}
    #rightBlock{display:flex;align-items:center;gap:.5rem;white-space:nowrap}
    .icon-btn{width:38px;height:38px;display:grid;place-items:center;border-radius:9999px;background:rgba(0,0,0,.06);border:1px solid rgba(0,0,0,.16)}
    .cart-text-btn{border:1px solid rgba(0,0,0,.16);padding:.45rem .8rem;border-radius:9999px;background:rgba(0,0,0,.04)}
    .badge{position:absolute;top:-4px;right:-4px;min-width:18px;height:18px;padding:0 4px;display:grid;place-items:center;border-radius:9999px;background:var(--ink);color:#fff;font-size:11px;font-weight:700;border:1px solid rgba(0,0,0,.15)}

    .drawer{position:fixed;inset:0;z-index:60;display:none}
    .drawer.open{display:block}
    .drawer>.panel{position:absolute;top:0;bottom:0;width:min(640px,94vw);background:var(--ivory);box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:auto;-webkit-overflow-scrolling:touch;contain:content}

    /* HERO */
    .hero{position:relative;height:calc(100svh - var(--header-h));display:grid;place-items:center;overflow:hidden;background:#000;contain:paint}
    .hero-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center;will-change:transform;transform:translateZ(0)}
    .svg-logo{--logo-color:var(--light-blue);display:inline-block;width:clamp(7rem,12vw,12rem);height:clamp(7rem,12vw,12rem);background:var(--logo-color);-webkit-mask:url('assets/logo.svg') no-repeat center/contain;mask:url('assets/logo.svg') no-repeat center/contain;will-change:transform,filter;filter:drop-shadow(0 6px 22px rgba(52,85,99,.28))}
    .logo-ink{--logo-color:var(--ink)}.logo-white{--logo-color:#fff}.logo-light{--logo-color:var(--light-blue)}
    .logo-beat{ animation:logoBeat 1.1s ease-in-out infinite; }
    @keyframes logoBeat{
      0%{transform:scale(1)} 12%{transform:scale(1.12)} 24%{transform:scale(1.02)}
      36%{transform:scale(1.10)} 48%{transform:scale(1.00)} 100%{transform:scale(1)}
    }
    @media (prefers-reduced-motion:reduce){ .logo-beat{animation:none} }

    .band{background:var(--ivory);border-radius:var(--band-radius);overflow:hidden}
    .band-inner{max-width:72rem;margin:0 auto;padding:3rem 1rem}

    /* ESITTELY palkki */
    .intro-wide{margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw)}
    .intro-grid{
      display:grid;
      grid-template-columns: var(--intro-img-w) minmax(300px, 1fr) var(--intro-img-w);
      gap:14px; align-items:start; padding:18px 0; will-change:transform;
      contain:paint;
    }
    .intro-img{
      background-size:cover;background-position:center;background-repeat:no-repeat;
      height:var(--intro-img-h);
      border:1px solid rgba(0,0,0,.12);
      border-radius:18px;background-color:#ddd;box-sizing:border-box;will-change:transform;
      transform:translateZ(0);
    }
    .intro-img.left { background-image:url('assets/intro-left.jpg'); }
    .intro-img.right{ background-image:url('assets/intro-right.jpg'); }
    .intro-copy{padding:6px 12px;min-width:0}
    .intro-copy .logo{width:56px;height:56px;display:block;margin:0 auto 12px;object-fit:contain}
    .intro-copy p{margin:0 0 .8rem;line-height:1.6}

    @media (max-width:900px){
      .intro-grid{grid-template-columns:1fr;padding:12px 0}
      .intro-img{height: clamp(220px, 48vw, 360px);border-radius:12px!important}
    }

    /* KAAVIOT (minimaalinen) */
    .pattern-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media (min-width:768px){.pattern-grid{grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}}
    .tile{position:relative;cursor:pointer;aspect-ratio:1/1;display:block;transition:transform .12s linear,box-shadow .12s linear;will-change:transform;transform:translateZ(0)}
    .tile:hover{transform:translateY(-1px);box-shadow:0 3px 10px rgba(0,0,0,.05)}
    .tile img{width:100%;height:100%;object-fit:cover;display:block}
    .tile-caption{position:absolute;left:0;right:0;bottom:0;padding:.45rem .65rem;background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,0));color:#fff;font-weight:800;letter-spacing:.06em;text-transform:uppercase;font-size:.85rem}
    .expander{grid-column:1/-1;background:var(--ivory);border-radius:16px;border:1px solid rgba(0,0,0,.12);overflow:hidden;contain:paint}
    .ex-row{display:grid;grid-template-columns:1fr;min-height:260px}
    @media (min-width:1024px){.ex-row{grid-template-columns:minmax(0,1.6fr) minmax(0,1fr)}}
    .ex-view{position:relative;background:#000;min-height:min(70vh,1100px)}
    .ex-view img{width:100%;height:100%;object-fit:contain;background:#000}
    .ex-prev,.ex-next{position:absolute;top:50%;transform:translateY(-50%);width:42px;height:42px;display:grid;place-items:center;border-radius:9999px;background:var(--ivory);border:1px solid rgba(0,0,0,.15);font-weight:800}
    .ex-prev{left:10px}.ex-next{right:10px}
    .ex-top{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:.6rem .9rem;border-bottom:1px solid rgba(0,0,0,.1)}
    .ex-info{padding:1rem 1.1rem;overflow:auto;-webkit-overflow-scrolling:touch}

    /* FOOTER ‚Äì iso logo */
    .footer-bar{position:relative;background:var(--olive);color:var(--ink)}
    .footer-grid{max-width:72rem;margin:0 auto;padding:1.5rem 1rem;display:grid;gap:1rem 2rem;align-items:start;grid-template-columns:1fr 1fr 1fr;grid-template-areas:"social contact logo"}
    .footer-logoBox{grid-area:logo;display:flex;justify-content:flex-end;align-items:flex-start;font-size:5.6rem;line-height:1}
    .svg-logo--footer{width:1em;height:1em;aspect-ratio:1/1}
    .footer-copy{text-align:center;font-size:.85rem;opacity:.85;padding:10px 1rem 16px}
    @media (max-width:860px){.footer-grid{grid-template-columns:1fr 1fr;grid-template-areas:"contact logo" "social logo"}.footer-logoBox{justify-content:center;font-size:4rem}}

    /* TOAST */
    .toast{position:fixed;top:calc(76px + var(--safe-top));left:0;right:0;display:flex;justify-content:center;z-index:70;pointer-events:none}
    .toast>div{pointer-events:auto}

    /* INTRO OVERLAY (verhot + pidennetty kesto) */
    #introOverlay{
      position:fixed;inset:0;z-index:9999;display:none;align-items:center;justify-content:center;
      background:rgba(246,246,244,.78);backdrop-filter:blur(10px);overflow:hidden;
      transition: background .6s ease, opacity .5s ease;
      contain:paint;
    }
    #introOverlay .intro-curtain{
      position:absolute;top:0;bottom:0;width:52vw;background:var(--ivory);
      box-shadow:0 0 30px rgba(0,0,0,.08);
      transform:translateX(0);transition:transform 1.25s cubic-bezier(.65,0,.35,1);
      z-index:2; will-change:transform; transform:translateZ(0);
    }
    #introOverlay .intro-curtain.left{left:0;border-right:1px solid rgba(0,0,0,.08)}
    #introOverlay .intro-curtain.right{right:0;border-left:1px solid rgba(0,0,0,.08)}
    #introOverlay.open{background:transparent;backdrop-filter:none}

    .intro-giant{
      position:relative; z-index:3; width:96vw; max-width:96vw; text-transform:uppercase;
      user-select:none; text-align:center; font-family:Impact,"Arial Black","Segoe UI Black","Helvetica Neue",Helvetica,Arial,system-ui,sans-serif;
      color:#111; line-height:.88; padding:0; filter:url(#roughPaint);
      text-shadow: .5px .5px 0 rgba(0,0,0,.35), -.5px -.5px 0 rgba(0,0,0,.25);
      transition: opacity .6s ease, transform .8s cubic-bezier(.22,1,.36,1);
    }
    #introOverlay.open .intro-giant{opacity:0; transform:scale(.98)}
    .intro-giant .line{display:block;white-space:nowrap; font-weight:900; font-size: clamp(48px, 22vw, 30rem); letter-spacing:.03em; transform: scaleX(var(--fit,1)) scaleY(1.03);}
    .intro-giant .line1{letter-spacing:.035em}
    .intro-giant .line2{letter-spacing:.025em}
    .intro-giant .ch{display:inline-block;opacity:0;transform:translateY(10px) rotate(var(--rot,0deg));transition:opacity .28s ease,transform .6s cubic-bezier(.22,1,.36,1)}
    .intro-giant .ch.show{opacity:1;transform:translateY(0) rotate(var(--rot,0deg))}
    .intro-giant .tagline{display:inline-block;margin-top:min(2.2vh,18px);font-weight:900;letter-spacing:.06em;font-size:clamp(16px,2.6vw,44px);opacity:0;transform:translateY(10px);transition:opacity .5s ease,transform .6s ease}
    .intro-giant .tagline.show{opacity:1;transform:translateY(0)}

    /* SCENE-kehykset (sticky + kevyt) */
    .scene{position:relative;height:220svh;content-visibility:auto;contain-intrinsic-size:1200px}
    .scene-sticky{position:sticky;top:var(--header-h);height:calc(100svh - var(--header-h));overflow:hidden;contain:paint}
    .panel{position:absolute;inset:0;will-change:transform,opacity;transform:translateZ(0);backface-visibility:hidden}

    /* Koira ‚Üí Intro (smooth, GPU) */
    #scene-intro .panel-dog{z-index:2;transform:translate3d(0,0,0);opacity:1}
    #scene-intro .panel-intro{z-index:1;transform:translate3d(100%,0,0);opacity:0}
    .panelCentered{display:grid;place-items:center}
    .panel-dog .dog-sticker{width:clamp(84px,16vw,200px);height:auto;pointer-events:none;transform:translateZ(0);image-rendering:auto;backface-visibility:hidden}
    .panel-dog .dog-emoji{display:none;font-size:clamp(96px,18vw,220px);line-height:1;user-select:none}

    /* Suunnittelija ‚Äì tekstimaski (kevennetty) */
    .designer-text-wrap{position:relative}
    .designer-mask-svg{position:absolute;inset:0;pointer-events:none;z-index:5;display:block;width:100%;height:100%;will-change:transform;transform:translateZ(0)}
    @media (max-width:480px){.designer-mask-svg{inset:4px}}
    @media (prefers-reduced-motion:reduce){.designer-mask-svg{display:none}}

    /* V√§henn√§ varjostuksia & filttereit√§ mobiilissa */
    @media (max-width:640px){
      .tile:hover{box-shadow:none}
    }
  </style>
</head>
<body>
  <!-- SVG-filtteri -->
  <svg width="0" height="0" style="position:absolute;left:-9999px;top:-9999px">
    <filter id="roughPaint">
      <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" seed="3" result="n"/>
      <feDisplacementMap in="SourceGraphic" in2="n" scale="2.2" xChannelSelector="R" yChannelSelector="G"/>
      <feGaussianBlur stdDeviation="0.15"/>
    </filter>
  </svg>

  <!-- HEADER -->
  <header class="fixed top-0 left-0 right-0 z-50">
    <div id="hdrRow" class="mx-auto max-w-6xl px-4 py-4">
      <a id="brandBlock" href="#etusivu" aria-label="Etusivu" class="flex items-center gap-3 min-w-0">
        <span class="svg-logo svg-logo--header logo-ink" style="width:3.2rem;height:3.2rem" role="img" aria-label="RUMAT STUDIO"></span>
        <span id="brandText" class="uppercase text-sm tracking-widest"><span class="font-black">RUMAT</span>&nbsp;<span class="font-semibold">STUDIO</span></span>
      </a>
      <nav id="mainNav" class="justify-self-center">
        <a href="#mikaonrumat"  class="hover:underline underline-offset-4">Mik√§ on RUMAT?</a>
        <a href="#kaaviot"      class="hover:underline underline-offset-4">Kaavat</a>
        <a href="#suunnittelija"class="hover:underline underline-offset-4">Suunnittelija</a>
        <a href="#yhteys"       class="hover:underline underline-offset-4">Ota yhteytt√§</a>
      </nav>
      <div id="rightBlock">
        <button id="openCartText" class="cart-text-btn">Ostoskori <span id="cartCountText" class="opacity-80"></span></button>
      </div>
    </div>
  </header>

  <!-- INTRO OVERLAY -->
  <div id="introOverlay" aria-hidden="true">
    <div class="intro-curtain left"></div>
    <div class="intro-curtain right"></div>
    <div id="introText" class="intro-giant"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <main class="pt-[64px]">
    <!-- HERO -->
    <section id="etusivu" class="hero">
      <img class="hero-img" src="assets/hero.jpg" srcset="assets/hero.jpg 1280w, assets/hero@2x.jpg 1920w" sizes="100vw" alt="RUMAT STUDIO" onerror="this.onerror=null;this.src='assets/placeholder.jpg'">
      <span id="heroLogo" class="svg-logo logo-light logo-beat" role="img" aria-label="RUMAT STUDIO"></span>
    </section>

    <!-- SCENE 1: KOIRA ‚Üí ESITTELY -->
    <section id="scene-intro" class="scene">
      <div class="scene-sticky">
        <div class="panel panel-dog panelCentered" aria-label="Koira tarra">
          <img id="dogSticker" class="dog-sticker" alt="Koira tarra" decoding="async">
          <div id="dogEmoji" class="dog-emoji" aria-hidden="true">üê∂</div>
        </div>
        <section id="mikaonrumat" class="panel panel-intro">
          <div class="band">
            <div class="band-inner">
              <h2 class="mb-4">Liian rumat ollakseen totta</h2>
              <div class="intro-wide">
                <div class="intro-grid">
                  <div class="intro-img left" aria-hidden="true"></div>
                  <div class="intro-copy">
                    <img class="logo" src="assets/logo.svg" alt="RUMAT STUDIO" onerror="this.onerror=null;this.src='assets/placeholder.jpg'">
                    <div id="intro-text" class="text-[15px] sm:text-base normalcase"></div>
                  </div>
                  <div class="intro-img right" aria-hidden="true"></div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- KAAVIOT -->
    <section id="kaaviot" class="py-0">
      <div class="band">
        <div class="band-inner">
          <h2 class="text-3xl mb-4">Kaavat</h2>
          <div id="patternsGrid" class="pattern-grid"></div>
        </div>
      </div>
    </section>

    <!-- SCENE 2: SUUNNITTELIJA (hymi√∂maski vain tekstipalstalla) -->
    <section id="scene-designer" class="scene">
      <div class="scene-sticky">
        <section id="suunnittelija" class="onstage">
          <div class="band" style="height:100%;display:flex;align-items:center">
            <div class="band-inner" style="width:100%">
              <h2 class="text-3xl mb-4">Suunnittelija</h2>
              <div class="grid md:grid-cols-[320px_1fr] gap-6 items-start">
                <div><img src="assets/designer.jpg" onerror="this.onerror=null;this.src='assets/placeholder.jpg';" alt="Suunnittelija" class="rounded-xl border border-[rgba(0,0,0,.12)] object-cover w-full h-[300px] md:h-[420px]"></div>
                <div class="designer-text-wrap space-y-4 normalcase">
                  <svg id="designerMaskText" class="designer-mask-svg" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
                    <defs>
                      <mask id="smileyMaskText">
                        <rect x="0" y="0" width="100" height="100" fill="white"/>
                        <!-- PYSTYsilm√§t ylemp√§n√§ ja korkeammat -->
                        <rect x="40" y="4"  width="5" height="46" rx="2" fill="black"/>
                        <rect x="55" y="4"  width="5" height="46" rx="2" fill="black"/>
                        <!-- Hymy: kulmat korkealla & paksu -->
                        <path d="M28 56 C 44 92, 56 92, 72 56" fill="none" stroke="black" stroke-width="9" stroke-linecap="round"/>
                      </mask>
                    </defs>
                    <rect x="0" y="0" width="100" height="100" fill="var(--ivory)" mask="url(#smileyMaskText)"/>
                  </svg>
                  <p>Aaltonen on itsevarma neuloja, joka ei rajoita luovuuttaan vain yhteen tekemisen tapaan. Neulomisen rinnalla my√∂s asusteiden ompelu on t√§rke√§ osa ilmaisua ‚Äì ja ennen kaikkea intohimo. Lapsuuden kiinnostus vaatteiden suunnitteluun johti muodin ja tekstiilisuunnittelun opintoihin vuonna 2021.</p>
                  <p>Pian Aaltonen valmistuu taiteen maisteriksi, mukanaan vankka osaaminen ja omat suosikkitekniikat, joita h√§n on hionut opintojen aikana. Neulomisen ja asusteiden lis√§ksi Aaltonen on syventynyt erityisesti vaatteiden kierr√§tykseen, korjaamiseen liittyviin asenteisiin sek√§ kriittiseen tarkasteluun siit√§, miten kuluttamista ohjataan ‚Äì ja millaisia seurauksia sill√§ on ymp√§rist√∂lle.</p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="yhteys" class="footer-bar">
      <div class="footer-grid">
        <div class="footer-social">
          <div><h6 class="text-xs font-black tracking-widest mb-1">Instagram</h6><a class="text-[color:var(--ink)] opacity-90 hover:underline" href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a></div>
          <div class="mt-3"><h6 class="text-xs font-black tracking-widest mb-1">TikTok</h6><a class="text-[color:var(--ink)] opacity-90 hover:underline" href="https://www.tiktok.com/@rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a></div>
        </div>
        <div class="footer-contact">
          <div><h6 class="text-xs font-black tracking-widest mb-1">Ota yhteytt√§</h6><a class="hover:underline" href="mailto:aaltonen96@outlook.com">aaltonen96@outlook.com</a></div>
          <div class="mt-2 text-sm">
            <div>Y-3436822-5</div>
            <div class="mt-2 flex flex-col gap-1">
              <a class="hover:underline" href="legal/privacy.html" target="_blank" rel="noopener">Tietosuojaseloste (PDF)</a>
              <a class="hover:underline" href="legal/terms.html"   target="_blank" rel="noopener">Toimitus- ja sopimusehdot (PDF)</a>
              <a class="hover:underline" href="#" id="openCookiePrefs">Ev√§steasetukset</a>
            </div>
          </div>
        </div>
        <div class="footer-logoBox"><span class="svg-logo svg-logo--footer logo-light" role="img" aria-label="RUMAT STUDIO"></span></div>
      </div>
      <div class="footer-copy">¬© <span id="year"></span> RUMAT STUDIO</div>
    </footer>
  </main>

  <script>
  /* ===== PIKKUTILIT ===== */
  const $=s=>document.querySelector(s)
  const fmtEUR=x=>new Intl.NumberFormat('fi-FI',{style:'currency',currency:'EUR'}).format(x)

  /* ===== KUVAT JA RESURSSIT: ESILATAA intro-vaiheessa ===== */
  // Lis√§√§ t√§h√§n kaikki ‚Äúraskaat‚Äù kuvat jotka haluat valmiiksi selaimen cacheen ennen skrollia.
  const ASSETS = [
    'assets/intro-left.jpg',
    'assets/intro-right.jpg',
    'assets/designer.jpg',
    // pient√§ koiraa ett√§ on kevyt
    'assets/dog-sticker.png',
    // patterns ‚Äì vain ensimm√§iset pehme√§sti (voit lis√§t√§ my√∂hemmin)
    'assets/patterns/dummy-kaava-1.jpg','assets/patterns/dummy-kaava-2.jpg',
    'assets/patterns/ilmainen-ohje-1.jpg'
  ];

  function preloadImages(urls, {onProgress, onDone}={}) {
    let done = 0, total = urls.length;
    if (!total) { onDone && onDone(); return; }
    urls.forEach(u=>{
      const img = new Image();
      img.decoding = 'async';
      img.loading = 'eager';
      img.onload = img.onerror = ()=>{
        done++; onProgress && onProgress(done, total);
        if (done===total) onDone && onDone();
      };
      img.src = u;
    });
  }

  /* ===== HERO LOGO: syke on pelkk√§ CSS, ei JS-ty√∂t√§ skrollissa ===== */

  /* ===== INTRO TEKSTIT ===== */
  function parasToHTML(s){return String(s||'').trim().split(/\n\s*\n/).map(p=>`<p>${p.trim()}</p>`).join('\n')}
  const defaultContent={pitch:`RUMAT STUDIO syntyi lapsuuden haaveesta ja vuosien aikana kypsyneest√§ intohimosta vaatesuunnitteluun. Vuonna 2023 visio alkoi muovautumaan nykyiseen muotoonsa: ajattomia ja kest√§vi√§ vaatteita, jotka syntyv√§t harkitusta rakkaudesta ja intohimosta luovaan tekemiseen.

RUMAT STUDIO pohjautuu vahvaan arvopohjaan. Se ei ole pelkk√§ tuotemerkki, vaan se rohkaisee pohtimaan omaa kulutusk√§ytt√§ytymist√§ ja inspiroi tekem√§√§n itse tai ainakin arvostamaan vaatteiden alkuper√§√§ ja tekij√∂it√§ niiden takana.

Taustalla on halu luoda ajattomia, kest√§vi√§ ja harkiten suunniteltuja vaatteita vastalauseena kertak√§ytt√∂iselle pikamuodille. Jokainen vaate suunnitellaan kest√§m√§√§n sek√§ k√§yt√∂ss√§ ett√§ ajassa. Suunnittelussa otetaan huomioon materiaalien laatu, vaatteen k√§ytt√∂tarkoitus ja visuaalinen ilme, mutta my√∂s tuotannon ekologinen ja eettinen kest√§vyys. K√§sity√∂n√§ valmistetut vaatteet vaativat aikaa ja siten nostavat vaatteen arvoa niin konkreettisesti kuin tunnearvossakin.

Tulevaisuuden suunnitelmissa on oman studiollisen avaaminen p√§√§kaupunkiseudulle. Tila toimisi kohtaamispaikkana, jossa voi sovittaa mallikappaleita, osallistua ty√∂pajoihin ja verkostoitua muiden kest√§v√§st√§ arvosta kiinnostuneiden muotoilijoiden, ompelijoiden ja suunnittelijoiden kanssa.

Jokainen ‚Äúliian RUMAT ollakseen totta‚Äù -tuote on suunniteltu huolella merkityksellisyydest√§ k√§ytt√∂mukavuuteen asti. Tavoitteena ei ole t√§ydellisyys, vaan rohkeus ja kehitys. Nimi RUMAT STUDIO viittaa juuri t√§h√§n: lapsen sallittuun keskener√§isyyteen, mutta t√§hd√§t√§ silti johonkin merkitykselliseen.`}
  $('#intro-text').innerHTML = parasToHTML(defaultContent.pitch)

  /* ===== KOIRA TARRA ‚Äì kevyt lataus + fallback emoji ===== */
  ;(()=>{
    const im=$('#dogSticker'), em=$('#dogEmoji');
    const url='assets/dog-sticker.png';
    const test = new Image();
    test.onload=()=>{im.src=url; em.style.display='none'}
    test.onerror=()=>{em.style.display='block'}
    test.src=url;
  })();

  /* ===== KAAVIOT ‚Äì kevyt render√∂inti ===== */
  const IMG=(id,n=1)=>`assets/patterns/${id}-${n}.jpg`;
  const PRODUCTS=[
    {id:'dummy-kaava',name:'Dummy kaava',price:0.01,sizes:'PDF',blurb:'V√§liaikainen testikaava ‚Äì korvataan my√∂hemmin.',images:[IMG('dummy-kaava',1),IMG('dummy-kaava',2)],deliverable:true},
    {id:'ilmainen-ohje',name:'Ilmainen ohje',price:0.00,sizes:'One size',blurb:'T√§ysin ilmainen kokeiltava ohje (dummy-PDF).',images:[IMG('ilmainen-ohje',1)],deliverable:true},
    {id:'takki',name:'Takki',price:0.01,sizes:'XS‚ÄìXL',blurb:'Ty√∂n alla ‚Äì pian saatavilla.',images:[IMG('takki',1)],deliverable:false},
  ];
  (function renderGrid(){
    const root=$('#patternsGrid');
    PRODUCTS.forEach(p=>{
      const tile=document.createElement('article');
      tile.className='tile';
      const im=document.createElement('img'); im.decoding='async'; im.loading='lazy'; im.alt=p.name; im.src=(p.images||[])[0]||'assets/placeholder.jpg';
      const cap=document.createElement('div'); cap.className='tile-caption'; cap.textContent=p.name+(p.price===0?' ¬∑ Ilmainen':(!p.deliverable?' ¬∑ Tulossa':''));
      tile.appendChild(im); tile.appendChild(cap); root.appendChild(tile);
      tile.addEventListener('click',()=>openExpander(p),{passive:true});
    });
  })();

  let expander; function openExpander(p){
    const grid=$('#patternsGrid');
    if (expander) expander.remove();
    expander=document.createElement('div'); expander.className='expander';
    expander.innerHTML=`
      <div class="ex-top"><div class="font-semibold">${p.name}</div>
        <button class="px-3 py-1 rounded border border-[rgba(0,0,0,.15)]" id="exClose">Sulje</button>
      </div>
      <div class="ex-row">
        <div class="ex-view"><img alt="${p.name}" src="${(p.images||[])[0]||'assets/placeholder.jpg'}"></div>
        <div class="ex-info">
          <h3 class="text-2xl mb-2">${p.name}</h3>
          <p class="opacity-80 mb-2 normalcase">${p.blurb||''}</p>
          <div class="mb-2"><span class="font-semibold">Koot: </span>${p.sizes||''}</div>
          <div class="text-xl font-bold mb-4">${p.price===0?'ILMAINEN':fmtEUR(p.price||0)}</div>
          ${p.deliverable?`<button class="btn bg-[color:var(--deep-blue)] text-white rounded-full px-4 py-2">Lis√§√§ ostoskoriin${p.price===0?' (0,00 ‚Ç¨)':''}</button>`:`<span class="inline-block px-4 py-2 rounded-full border border-[rgba(0,0,0,.15)]">Tulossa</span>`}
        </div>
      </div>`;
    grid.appendChild(expander);
    expander.querySelector('#exClose').addEventListener('click',()=>expander.remove(),{passive:true});
  }

  /* ===== STICKY SCENE -kevyt scroll driver (rAF, ei mittauksia) ===== */
  (function smoothScenes(){
    const s1 = document.querySelector('#scene-intro .scene-sticky');
    const dog = document.querySelector('#scene-intro .panel-dog');
    const intro = document.querySelector('#scene-intro .panel-intro');
    const s2 = document.querySelector('#scene-designer .scene-sticky');
    const mask = document.querySelector('#designerMaskText');

    let ticking=false;
    function onScroll(){
      if (ticking) return;
      ticking=true;
      requestAnimationFrame(()=>{
        updateScene1();
        updateScene2();
        ticking=false;
      });
    }
    function progressOf(sticky){
      // Laske 0..1 progress ilman layout-mittauksia toistuvasti:
      // k√§ytet√§√§n getBoundingClientRect kerran per frame (kevyt) ja
      // vain kahdelle stickylle ‚Äì ei listoja/looppeja.
      const r = sticky.getBoundingClientRect();
      const h = window.innerHeight - parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--header-h'));
      const start = r.top;      // kun sticky yl√§reuna koskee headeria
      const total = r.height - h; // kokonaismatka sis√§ll√§
      let p = 1 - ((r.bottom - h) / total);
      if (!isFinite(p)) p = 0;
      return Math.min(1, Math.max(0, p));
    }

    function updateScene1(){
      if (!s1) return;
      const p = progressOf(s1); // 0..1
      // Koira liukuu vasemmalle, intro tulee oikealta sis√§√§n
      const dogX = -100 * p;     // %
      const introX = 100 * (1-p);
      const introOpacity = Math.min(1, p*1.5);

      dog.style.transform   = `translate3d(${dogX}%,0,0)`;
      dog.style.opacity     = `${1 - p}`;
      intro.style.transform = `translate3d(${introX}%,0,0)`;
      intro.style.opacity   = `${introOpacity}`;
    }

    function updateScene2(){
      if (!s2 || !mask) return;
      const p = progressOf(s2); // 0..1
      // Hymi√∂maski liukuu alas: 0% -> 120% (pois n√§kyvist√§)
      const t = p*120;
      mask.style.transform = `translate3d(0,${t}%,0)`;
    }

    // passiivinen scroll + iOS velocityn s√§ilytys
    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', ()=>{onScroll();}, {passive:true});
    onScroll();
  })();

  /* ===== INTRO ANIMAATIO + ENNAKKOLATAUS ===== */
  (function giantIntro(){
    const overlay=$('#introOverlay');
    const out=$('#introText');
    if(!overlay||!out) return;

    const L1='RUMAT'; const L2='STUDIO'; const TAG='LIIAN RUMAT OLLAKSEEN TOTTA';
    const rot1=[-1,+2,-2,+1,0]; const rot2=[-1,0,+1,+1,0,-2];
    function buildLine(text,rots,cls){
      const line=document.createElement('span'); line.className='line '+cls;
      Array.from(text).forEach((ch,i)=>{const s=document.createElement('span');s.className='ch';s.textContent=ch;const base=(rots&&i<rots.length)?rots[i]:0;const jitter=(Math.random()*1.2-0.6);s.style.setProperty('--rot',(base+jitter)+'deg');if(ch==='O')s.style.transform+=' scaleX(0.98)';line.appendChild(s)});
      return line;
    }
    overlay.style.display='flex'; out.innerHTML='';
    const line1=buildLine(L1,rot1,'line1'); const br=document.createElement('br'); const line2=buildLine(L2,rot2,'line2');
    const tag=document.createElement('div'); tag.className='tagline'; tag.textContent=TAG;
    out.appendChild(line1); out.appendChild(br); out.appendChild(line2); out.appendChild(tag);

    function fitLine(line){const avail=Math.min(window.innerWidth*0.96,2600);line.style.setProperty('--fit','1');const w=line.getBoundingClientRect().width||1;const scale=Math.max(0.6,Math.min(1.6,(avail/w)*0.995));line.style.setProperty('--fit', String(scale))}
    const doFit=()=>{fitLine(line1);fitLine(line2)}
    doFit(); window.addEventListener('resize',()=>requestAnimationFrame(doFit),{passive:true})

    // Kirjain- ja tagline-efekti (hiukan pidempi)
    const chars=out.querySelectorAll('.ch');let t=0;chars.forEach(el=>{setTimeout(()=>el.classList.add('show'),t);t+=58});setTimeout(()=>tag.classList.add('show'),t+260);

    // Lataa raskaat kuvat intron aikana, sitten avaa verhot
    preloadImages(ASSETS,{
      onDone:()=>{
        // pieni heng√§hdys ett√§ k√§ytt√§j√§ kerke√§√§ aistimaan intron (~0.9s)
        setTimeout(()=>{
          overlay.classList.add('open');
          // verhojen liike + haalistus -> poista overlay
          setTimeout(()=>{overlay.style.opacity='0';setTimeout(()=>overlay.style.display='none',400)}, 950);
        }, 900);
      }
    });
  })();

  /* ===== VUOSI ===== */
  (function(){const y=$('#year');if(y)y.textContent=new Date().getFullYear()})();

  /* ===== NAV pikalinkit smoothisti (ilman layout-laskuja) ===== */
  (function smoothAnchors(){
    function go(id){
      const el=document.querySelector(id);
      if(!el) return;
      el.scrollIntoView({behavior:'smooth',block:'start'});
    }
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click',e=>{
        const href=a.getAttribute('href');
        if (href==='#' || href==='#!' || href.length<2) return;
        e.preventDefault(); go(href);
      },{passive:false});
    });
  })();
  </script>
</body>
</html>
