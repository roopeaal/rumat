<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RUMAT STUDIO</title>

  <!-- Perus-SEO -->
  <meta name="description" content="RUMAT STUDIO – ajattomia ja kestäviä kaavoja ja digiohjeita.">
  <link rel="icon" href="assets/favicon.ico">
  <link rel="preload" as="image" href="assets/hero.jpg">

  <!-- Montserrat & Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- EmailJS selainkirjasto -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    /* ===== EmailJS asetukset (paina Ctrl/Cmd+E syöttääksesi) ===== */
    function getEmailCfg(){
      return {
        PUBLIC_KEY:  localStorage.getItem('emailjs_public')  || '',
        SERVICE_ID:  localStorage.getItem('emailjs_service') || '',
        TEMPLATE_ID: localStorage.getItem('emailjs_template')|| ''
      };
    }
    function setEmailCfg(pub, svc, tpl){
      if (pub) localStorage.setItem('emailjs_public', pub);
      if (svc) localStorage.setItem('emailjs_service', svc);
      if (tpl) localStorage.setItem('emailjs_template', tpl);
    }
    window.configureEmailJS = function(){
      const cur = getEmailCfg();
      const pub = prompt('EmailJS Public Key', cur.PUBLIC_KEY||'')||'';
      const svc = prompt('EmailJS Service ID', cur.SERVICE_ID||'')||'';
      const tpl = prompt('EmailJS Template ID', cur.TEMPLATE_ID||'')||'';
      setEmailCfg(pub.trim(), svc.trim(), tpl.trim());
      const cfg = getEmailCfg();
      if (window.emailjs && cfg.PUBLIC_KEY){
        try{ window.emailjs.init({ publicKey: cfg.PUBLIC_KEY }); alert('EmailJS alustettu.'); }
        catch(e){ console.error(e); alert('EmailJS-alustus epäonnistui. Tarkista avaimet.'); }
      }
    };
    (function(){
      const cfg = getEmailCfg();
      if (window.emailjs && cfg.PUBLIC_KEY){
        try{ window.emailjs.init({ publicKey: cfg.PUBLIC_KEY }); }catch(e){ console.warn(e); }
      }
      window.addEventListener('keydown', (e)=>{
        if ((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='e'){
          e.preventDefault(); window.configureEmailJS();
        }
      });
    })();

    /* ===== Evästeet / suostumukset ===== */
    const CONSENT_KEY = 'cookieConsent.v1';
    function getConsent(){ try{ return JSON.parse(localStorage.getItem(CONSENT_KEY)||'{}'); }catch{return {};}}
    function setConsent(c){ localStorage.setItem(CONSENT_KEY, JSON.stringify(c||{})); }
    function enableAnalytics(){
      // Lisää oma analytiikka vain suostumuksen jälkeen (esim. GA4)
      console.log('Analytiikka käytössä suostumuksella.');
    }
  </script>

  <style>
    :root{
      --ink:#202020; 
      --olive:#A1A266; 
      --deep-blue:#345563; 
      --ivory:#F6F6F4;
      --light-blue:#DEEEEE;   /* vaaleansininen logo */
      --header-h:64px; 
      --band-radius: 16px;
    }
    html{ scroll-padding-top: var(--header-h); }
    body{ font-family:Montserrat,system-ui,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--ivory); margin:0; overflow-x:hidden; }

    h1,h2,h3,h4,h5,h6{
      font-weight:900!important; text-transform:uppercase; color:var(--deep-blue);
      letter-spacing:.02em; margin:0 0 .6rem;
    }
    .normalcase{ text-transform:none!important; }

    /* Yläpalkki (3-palstainen) */
    header{ background:var(--ivory); border-bottom:1px solid rgba(0,0,0,.08); }
    #hdrRow{ position:relative; display:grid; grid-template-columns:auto 1fr auto; align-items:center; }
    #brandText{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:min(42vw,460px); color:var(--ink); }
    #brandText .strong{ font-weight:900; } #brandText .light{ font-weight:600; }
    #mainNav{ justify-self:center; display:flex; gap:1.5rem; white-space:nowrap; font-size:13px; text-transform:uppercase; letter-spacing:.2em; min-width:0; }
    #mainNav a{ color:var(--ink); text-decoration:none; }
    .nav-hidden{ display:none!important; } .nav-measure{ position:absolute!important; visibility:hidden!important; display:flex!important; white-space:nowrap!important; }
    #rightBlock{ position:static; justify-self:end; display:flex; align-items:center; gap:.5rem; white-space:nowrap; }
    .icon-btn{ position:relative; width:38px; height:38px; display:grid; place-items:center; border-radius:9999px; background:rgba(0,0,0,.06); border:1px solid rgba(0,0,0,.16); color:var(--ink); }
    .icon-btn:hover{ background:rgba(0,0,0,.10); }
    .cart-text-btn{ border:1px solid rgba(0,0,0,.16); padding:.45rem .8rem; border-radius:9999px; color:var(--ink); background:rgba(0,0,0,.04); }
    .cart-text-btn:hover{ background:rgba(0,0,0,.08); }
    .badge{ position:absolute; top:-4px; right:-4px; min-width:18px; height:18px; padding:0 4px; display:grid; place-items:center; border-radius:9999px; background:var(--ink); color:#fff; font-size:11px; font-weight:700; border:1px solid rgba(0,0,0,.15); }

    .btn{ border-radius:9999px; padding:.6rem 1rem; border:1px solid rgba(0,0,0,.16); background:rgba(0,0,0,.04); }
    .btn:hover{ background:rgba(0,0,0,.08); }

    /* Drawerit */
    .drawer{ position:fixed; inset:0; z-index:60; display:none; }
    .drawer.open{ display:block; }
    .drawer > .panel{ position:absolute; top:0; bottom:0; width:min(640px,94vw); background:var(--ivory); box-shadow:0 10px 30px rgba(0,0,0,.2); overflow:auto; }
    #menuDrawer .panel{ left:0; } #cartDrawer .panel{ right:0; } #checkoutDrawer .panel{ right:0; }
    #cookieDrawer .panel{ right:0; }

    /* Hero */
    .hero{ position:relative; height: calc(100svh - var(--header-h)); display:grid; place-items:center; overflow:hidden; text-align:center; background:#000; }
    .hero-img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; z-index:0; }

    /* === VÄRITETTÄVÄ SVG-LOGO (mask) === */
    .svg-logo{
      --logo-color: var(--ink);
      display:inline-block;
      width: 6.5rem; height: 6.5rem;
      background-color: var(--logo-color);
      -webkit-mask: url('assets/logo.svg') no-repeat center / contain;
              mask: url('assets/logo.svg') no-repeat center / contain;
    }
    @media (min-width:640px){ .svg-logo{ width:7rem; height:7rem; } }
    .logo-ink { --logo-color: var(--ink); }
    .logo-white { --logo-color: #fff; }
    .logo-light { --logo-color: var(--light-blue); } /* vaaleansininen */

    /* HERO: logo isommaksi */
    .hero .svg-logo{ width: 9rem; height: 9rem; }
    @media (min-width:640px){ .hero .svg-logo{ width: 11rem; height: 11rem; } }
    @media (min-width:1024px){ .hero .svg-logo{ width: 12rem; height: 12rem; } }

    /* HEADER: logo suuremmaksi */
    .svg-logo--header{ width: 2.5rem; height: 2.5rem; }
    @media (min-width:640px){ .svg-logo--header{ width: 2.75rem; height: 2.75rem; } }
    @media (min-width:1024px){ .svg-logo--header{ width: 3rem; height: 3rem; } }

    /* Bandit & kortit */
    .band{ background:var(--ivory); border-radius:var(--band-radius); overflow:hidden; }
    .band-inner{ max-width:72rem; margin:0 auto; padding:3rem 1rem; }

    /* ================== INTRO (Esittely) ================== */
    .intro-wide{ margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }
    .intro-grid{
      display:grid;
      grid-template-columns: auto minmax(300px, 64rem) auto; /* kuvat mitoittuvat sisällön mukaan */
      gap:14px; align-items:start; padding:18px 0;
      --intro-h: 320px; /* JS päivittää tämän tekstin korkeudeksi työpöydällä */
    }
    /* Sivu-kuvien säiliöt (vain desktop/tablet) */
    .intro-col{
      border:1px solid rgba(0,0,0,.12);
      overflow:hidden;
      align-self:start;
      max-width:40vw;      /* estää ylileveän kuvan */
    }
    .intro-col.left{  border-radius:0 18px 18px 0; }
    .intro-col.right{ border-radius:18px 0 0 18px; }

    /* Varsinaiset kuvat — pidä kuvasuhde, korkeus = tekstin korkeus */
    .intro-media{
      display:block;
      height: var(--intro-h);
      width: auto;              /* säilyttää kuvasuhteen */
      max-width: 100%;
    }

    /* Keskipalstan sisältö */
    .intro-copy{ padding: 6px 12px; min-width:0; }
    .intro-copy .logo{ width:56px; height:56px; display:block; margin:0 auto 12px; object-fit:contain; }
    .intro-copy p{ margin:0 0 .8rem; line-height:1.55; }

    /* MOBIILI: yhden palstan asettelu + tekstin ympäröimät kuvat */
    @media (max-width: 900px){
      .intro-grid{ grid-template-columns: 1fr; }
      .intro-col{ display:none; } /* piilota sivukuvat kapealla */
      .intro-copy{ padding: 2px 2px; }

      /* Kelluvat kuvat tekstin seassa */
      .intro-float{
        display:block;
        height:auto;     /* <img> säilyttää luontaisen kuvasuhteen */
        max-width: 48%;  /* sopiva sivuleveys */
      }
      .intro-float-left{
        float:left;
        margin: 0 12px 12px 0;   /* teksti oikealle, yläreuna automaattisesti 1. rivissä */
      }
      .intro-float-right{
        float:right;
        margin: 12px 0 0 12px;   /* teksti vasemmalle, asettuu sisältöä vasten alas */
        shape-outside: margin-box; /* siistimpi muotoilu jos selain tukee */
      }
      .intro-clear{ clear:both; height:0; }
    }

    /* Kaaviot */
    .card{ background:var(--ivory); border-radius:16px; border:1px solid rgba(0,0,0,.12); overflow:hidden; }
    .pattern-grid{ display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:12px; align-items:start; }
    @media (min-width:768px){ .pattern-grid{ grid-template-columns: repeat(4,minmax(0,1fr)); gap:14px; } }
    .tile{ position:relative; cursor:pointer; aspect-ratio:1/1; display:block; }
    .tile img{ width:100%; height:100%; object-fit:cover; display:block; }
    .tile-caption{ position:absolute; left:0; right:0; bottom:0; padding:.45rem .65rem; background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,0)); color:#fff; font-weight:800; letter-spacing:.06em; text-transform:uppercase; font-size:.85rem; }
    .tile--selected{ outline:2px solid var(--deep-blue); }
    .min-full{ position:absolute; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.04); color:var(--deep-blue); font-weight:800; text-decoration:underline; }
    .min-full:hover{ background:rgba(0
