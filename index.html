<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RUMAT STUDIO</title>

  <!-- Perus-SEO -->
  <meta name="description" content="RUMAT STUDIO – ajattomia ja kestäviä kaavoja ja digiohjeita.">
  <link rel="icon" href="assets/favicon.ico">
  <link rel="preload" as="image" href="assets/hero.jpg">

  <!-- Montserrat & Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- EmailJS selainkirjasto (asetukset: paina Ctrl/Cmd + E) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    function getEmailCfg(){ return {
      PUBLIC_KEY:localStorage.getItem('emailjs_public')||'',
      SERVICE_ID:localStorage.getItem('emailjs_service')||'',
      TEMPLATE_ID:localStorage.getItem('emailjs_template')||''
    }; }
    function setEmailCfg(pub,svc,tpl){
      if(pub) localStorage.setItem('emailjs_public',pub);
      if(svc) localStorage.setItem('emailjs_service',svc);
      if(tpl) localStorage.setItem('emailjs_template',tpl);
    }
    window.configureEmailJS=function(){
      const cur=getEmailCfg();
      const pub=prompt('EmailJS Public Key',cur.PUBLIC_KEY||'')||'';
      const svc=prompt('EmailJS Service ID',cur.SERVICE_ID||'')||'';
      const tpl=prompt('EmailJS Template ID',cur.TEMPLATE_ID||'')||'';
      setEmailCfg(pub.trim(),svc.trim(),tpl.trim());
      const cfg=getEmailCfg();
      if(window.emailjs&&cfg.PUBLIC_KEY){
        try{ window.emailjs.init({publicKey:cfg.PUBLIC_KEY}); alert('EmailJS alustettu.'); }
        catch(e){ console.error(e); alert('EmailJS-alustus epäonnistui.'); }
      }
    };
    (function(){
      const cfg=getEmailCfg();
      if(window.emailjs&&cfg.PUBLIC_KEY){ try{ window.emailjs.init({publicKey:cfg.PUBLIC_KEY}); }catch{} }
      window.addEventListener('keydown',e=>{
        if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='e'){ e.preventDefault(); window.configureEmailJS(); }
      });
    })();
  </script>

  <style>
    :root{
      --ink:#202020; --olive:#A1A266; --deep-blue:#345563; --ivory:#F6F6F4; --light-blue:#DEEEEE;
      --header-h:64px; --band-radius:16px;

      /* Sivupadding (samat kaikille sisältöalueille) */
      --site-pad: 1rem;

      /* Esittely – kuvat + teksti leveyden ja sijainnin kontrollit */
      --intro-gap: 16px;
      --intro-left-w:  min(34vw, 420px);
      --intro-right-w: min(34vw, 420px);
      --intro-img-h:   min(66vh, 640px);  /* hieman alle koko näkymän */
      --intro-right-offset: 280px;        /* OIKEA kuva alkaa alempaa (enemmän kuin ennen) */
      --intro-radius: 18px;
    }
    @media (max-width:900px){
      :root{
        --site-pad: 1rem;
        --intro-gap: 12px;
        --intro-left-w:  clamp(44vw, 48vw, 52vw);
        --intro-right-w: clamp(44vw, 48vw, 52vw);
        --intro-img-h:   min(50vh, 420px);
        --intro-right-offset: 160px;      /* mobiilissa laskeutuu aiemmin */
        --intro-radius: 12px;
      }
    }

    html{ scroll-padding-top: var(--header-h); }
    body{ font-family:Montserrat,system-ui,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--ivory); margin:0; overflow-x:hidden; }
    h1,h2,h3,h4,h5,h6{ font-weight:900!important; text-transform:uppercase; color:var(--deep-blue); letter-spacing:.02em; margin:0 0 .6rem; }
    .normalcase{ text-transform:none!important; }

    /* HEADER */
    header{ background:var(--ivory); border-bottom:1px solid rgba(0,0,0,.08); }
    #hdrRow{ position:relative; display:grid; grid-template-columns:auto 1fr auto; align-items:center; }
    #brandText{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:min(42vw,460px); color:var(--ink); }
    #brandText .strong{ font-weight:900; } #brandText .light{ font-weight:600; }
    #mainNav{ justify-self:center; display:flex; gap:1.5rem; white-space:nowrap; font-size:13px; text-transform:uppercase; letter-spacing:.2em; min-width:0; }
    #mainNav a{ color:var(--ink); text-decoration:none; }
    .nav-hidden{ display:none!important; } .nav-measure{ position:absolute!important; visibility:hidden!important; display:flex!important; white-space:nowrap!important; }
    #rightBlock{ justify-self:end; display:flex; align-items:center; gap:.5rem; white-space:nowrap; }
    .icon-btn{ position:relative; width:38px; height:38px; display:grid; place-items:center; border-radius:9999px; background:rgba(0,0,0,.06); border:1px solid rgba(0,0,0,.16); color:var(--ink); }
    .icon-btn:hover{ background:rgba(0,0,0,.10); }
    .cart-text-btn{ border:1px solid rgba(0,0,0,.16); padding:.45rem .8rem; border-radius:9999px; color:var(--ink); background:rgba(0,0,0,.04); }
    .cart-text-btn:hover{ background:rgba(0,0,0,.08); }
    .badge{ position:absolute; top:-4px; right:-4px; min-width:18px; height:18px; padding:0 4px; display:grid; place-items:center; border-radius:9999px; background:var(--ink); color:#fff; font-size:11px; font-weight:700; border:1px solid rgba(0,0,0,.15); }

    .btn{ border-radius:9999px; padding:.6rem 1rem; border:1px solid rgba(0,0,0,.16); background:rgba(0,0,0,.04); }
    .btn:hover{ background:rgba(0,0,0,.08); }

    /* Drawerit */
    .drawer{ position:fixed; inset:0; z-index:60; display:none; }
    .drawer.open{ display:block; }
    .drawer>.panel{ position:absolute; top:0; bottom:0; width:min(640px,94vw); background:var(--ivory); box-shadow:0 10px 30px rgba(0,0,0,.2); overflow:auto; }
    #menuDrawer .panel{ left:0; } #cartDrawer .panel{ right:0; } #checkoutDrawer .panel{ right:0; }

    /* Värillinen mask-logo */
    .svg-logo{ --logo-color: var(--ink); display:inline-block; width:6.5rem; height:6.5rem; background-color:var(--logo-color); -webkit-mask:url('assets/logo.svg') no-repeat center/contain; mask:url('assets/logo.svg') no-repeat center/contain; }
    .logo-ink{ --logo-color:var(--ink); } .logo-white{ --logo-color:#fff; } .logo-light{ --logo-color:var(--light-blue); }
    .svg-logo--header{ width:2.8rem; height:2.8rem; } @media (min-width:640px){ .svg-logo--header{ width:3rem; height:3rem; } } @media (min-width:1024px){ .svg-logo--header{ width:3.2rem; height:3.2rem; } }

    /* HERO */
    .hero{ position:relative; height:calc(100svh - var(--header-h)); display:grid; place-items:center; overflow:hidden; text-align:center; background:#000; }
    .hero-img{ position:absolute; inset:0; width:100vw; height:100%; object-fit:cover; object-position:center; transform:none; }
    .hero .svg-logo{ width:11rem; height:11rem; } @media (min-width:640px){ .hero .svg-logo{ width:12rem; height:12rem; } } @media (min-width:1024px){ .hero .svg-logo{ width:13rem; height:13rem; } }

    /* Bandit (sama leveys kaikille sisältölohkoille) */
    .band{ background:var(--ivory); border-radius:var(--band-radius); overflow:hidden; }
    .band-inner{ max-width:72rem; margin:0 auto; padding:3rem var(--site-pad); }

    /* ===== Esittely: float + shape-outside ===== */
    .intro-wide{ margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); }
    .intro-flow{ max-width:72rem; margin:0 auto; padding:20px var(--site-pad); } /* sama leveys & sisennys kuin muilla */
    .intro-copy p{ margin:0 0 .9rem; line-height:1.6; }

    .intro-img{ background-size:cover; background-position:center; background-repeat:no-repeat; height:var(--intro-img-h); border:1px solid rgba(0,0,0,.12); }

    .intro-left{
      float:left; width:var(--intro-left-w);
      margin:0 var(--intro-gap) 14px calc(-1 * ((50vw - 50%) + var(--site-pad)));
      border-radius:0 var(--intro-radius) var(--intro-radius) 0;
      shape-outside: inset(0); -webkit-shape-outside: inset(0);
      shape-margin:0; -webkit-shape-margin:0;
    }
    .intro-right{
      float:right; width:var(--intro-right-w);
      margin: var(--intro-right-offset) calc(-1 * ((50vw - 50%) + var(--site-pad))) 14px var(--intro-gap);
      border-radius:var(--intro-radius) 0 0 var(--intro-radius);
      shape-outside: inset(0); -webkit-shape-outside: inset(0);
      shape-margin:0; -webkit-shape-margin:0;
    }

    /* KAAVIOT */
    .card{ background:var(--ivory); border-radius:16px; border:1px solid rgba(0,0,0,.12); overflow:hidden; }
    .pattern-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; align-items:start; }
    @media (min-width:768px){ .pattern-grid{ grid-template-columns:repeat(4,minmax(0,1fr)); gap:14px; } }
    .tile{ position:relative; cursor:pointer; aspect-ratio:1/1; display:block; }
    .tile img{ width:100%; height:100%; object-fit:cover; display:block; }
    .tile-caption{ position:absolute; left:0; right:0; bottom:0; padding:.45rem .65rem; background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,0)); color:#fff; font-weight:800; letter-spacing:.06em; text-transform:uppercase; font-size:.85rem; }
    .tile--selected{ outline:2px solid var(--deep-blue); }
    .min-full{ position:absolute; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.04); color:var(--deep-blue); font-weight:800; text-decoration:underline; }
    .min-full:hover{ background:rgba(0,0,0,.08); }
    .expander{ grid-column:1 / -1; background:var(--ivory); border-radius:16px; border:1px solid rgba(0,0,0,.12); overflow:hidden; }
    .ex-row{ display:grid; grid-template-columns:1fr; min-height:260px; }
    @media (min-width:1024px){ .ex-row{ grid-template-columns:minmax(0,1.6fr) minmax(0,1fr); } }
    .ex-view{ position:relative; background:#000; min-height:min(80vh,1600px); min-width:0; }
    .ex-info{ padding:1rem 1.1rem; overflow:auto; min-width:0; overflow-wrap:anywhere; }
    .ex-view img{ width:100%; height:100%; object-fit:contain; background:#000; }
    .ex-prev,.ex-next{ position:absolute; top:50%; transform:translateY(-50%); width:42px; height:42px; display:grid; place-items:center; border-radius:9999px; background:var(--ivory); border:1px solid rgba(0,0,0,.15); font-weight:800; }
    .ex-prev{ left:10px; } .ex-next{ right:10px; }
    .ex-top{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.6rem .9rem; border-bottom:1px solid rgba(0,0,0,.1); }

    /* FOOTER (sama sisältöleveys) */
    .footer-bar{ position:relative; z-index:2; background:var(--olive); color:var(--ink); }
    .footer-grid{ max-width:72rem; margin:0 auto; padding:1.5rem var(--site-pad); display:grid; gap:1rem 2rem; align-items:start; grid-template-columns:1fr 1fr 1fr; grid-template-areas:"social contact logo"; }
    .footer-col h6{ font-size:.8rem; font-weight:900; text-transform:uppercase; letter-spacing:.12em; margin:0 0 .35rem; color:var(--ink); }
    .footer-handle,.footer-link{ color:var(--ink); opacity:.9; text-decoration:none; }
    .footer-handle:hover,.footer-link:hover{ text-decoration:underline; }
    .footer-social{ grid-area:social; display:flex; flex-direction:column; gap:.9rem; }
    .footer-contact{ grid-area:contact; display:flex; flex-direction:column; gap:.9rem; }
    .footer-logoBox{ grid-area:logo; display:flex; justify-content:flex-end; align-items:stretch; }
    .svg-logo--footer{ width:auto; height:100%; min-height:72px; aspect-ratio:1/1; align-self:stretch; }
    .footer-copy{ text-align:center; font-size:.85rem; opacity:.85; padding:10px var(--site-pad) 16px; }
    @media (max-width:860px){ .footer-grid{ grid-template-columns:1fr 1fr; grid-template-areas:"contact logo" "social logo"; } .footer-logoBox{ justify-content:center; } }

    /* Toast */
    .toast{ position:fixed; top:76px; left:0; right:0; display:flex; justify-content:center; z-index:70; pointer-events:none; }
    .toast>div{ pointer-events:auto; }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="fixed top-0 left-0 right-0 z-50">
    <div id="hdrRow" class="mx-auto max-w-6xl px-4 py-4 grid gap-3">
      <a id="brandBlock" href="#etusivu" aria-label="Etusivu" class="flex items-center gap-3 min-w-0">
        <span class="svg-logo svg-logo--header logo-ink" role="img" aria-label="RUMAT STUDIO"></span>
        <span id="brandText" class="uppercase text-sm tracking-widest"><span class="strong">RUMAT</span>&nbsp;<span class="light">STUDIO</span></span>
      </a>
      <nav id="mainNav" class="justify-self-center">
        <a href="#mikaonrumat"  class="hover:underline underline-offset-4">Mikä on RUMAT?</a>
        <a href="#kaaviot"      class="hover:underline underline-offset-4">Kaavat</a>
        <a href="#suunnittelija"class="hover:underline underline-offset-4">Suunnittelija</a>
        <a href="#yhteys"       class="hover:underline underline-offset-4">Ota yhteyttä</a>
      </nav>
      <div id="rightBlock" class="flex items-center gap-2">
        <button id="openMenu" class="icon-btn hidden" aria-controls="menuDrawer" aria-expanded="false" aria-label="Valikko">
          <span aria-hidden="true" style="font-size:20px;line-height:1">☰</span><span class="sr-only">Valikko</span>
        </button>
        <button id="openCartText" class="cart-text-btn">Ostoskori <span id="cartCountText" class="opacity-80"></span></button>
        <button id="openCartIcon" class="icon-btn hidden" aria-label="Ostoskori">
          <svg aria-hidden="true" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="20" r="1.8"></circle><circle cx="17" cy="20" r="1.8"></circle>
            <path d="M3 4h2l2.2 10.2a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6L21 8H7.1"></path>
          </svg>
          <span class="badge" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- CONTENT -->
  <main class="pt-[64px]">
    <!-- HERO -->
    <section id="etusivu" class="hero px-4">
      <img src="assets/hero.jpg" alt="RUMAT STUDIO hero" class="hero-img" onerror="this.onerror=null;this.src='assets/placeholder.jpg';">
      <span class="svg-logo logo-light" role="img" aria-label="RUMAT STUDIO"></span>
    </section>

    <!-- Vahvistusviestit -->
    <section id="orderMsg" class="max-w-3xl mx-auto my-4 px-4 hidden"></section>

    <!-- MIKÄ ON RUMAT? -->
    <section id="mikaonrumat" class="py-0">
      <div class="band full-bleed">
        <div class="band-inner">
          <h2 class="mb-4">Liian rumat ollakseen totta</h2>

          <div class="intro-wide">
            <div class="intro-flow" id="introFlow">
              <div class="intro-img intro-left" aria-hidden="true"></div>
              <div class="intro-copy">
                <div id="intro-text" class="text-[15px] sm:text-base normalcase"></div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- KAAVIOT -->
    <section id="kaaviot" class="py-0">
      <div class="band full-bleed">
        <div class="band-inner">
          <h2 class="text-3xl mb-4">Kaavat</h2>
          <div id="patternsGrid" class="pattern-grid"></div>
        </div>
      </div>
    </section>

    <!-- SUUNNITTELIJA -->
    <section id="suunnittelija" class="py-0">
      <div class="band full-bleed">
        <div class="band-inner">
          <h2 class="text-3xl mb-4">Suunnittelija</h2>
          <div class="grid md:grid-cols-[320px_1fr] gap-6 items-start">
            <div>
              <img src="assets/designer.jpg" onerror="this.onerror=null;this.src='assets/placeholder.jpg';" alt="Suunnittelija" class="rounded-xl border border-[rgba(0,0,0,.12)] object-cover w-full h-[300px] md:h-[420px]">
            </div>
            <div class="space-y-4 normalcase">
              <p>Aaltonen on itsevarma neuloja, joka ei rajoita luovuuttaan vain yhteen tekemisen tapaan. Neulomisen rinnalla myös asusteiden ompelu on tärkeä osa ilmaisua – ja ennen kaikkea intohimo.</p>
              <p>Pian Aaltonen valmistuu taiteen maisteriksi… (esimerkkitekstiä)</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="yhteys" class="footer-bar">
      <div class="footer-grid">
        <div class="footer-social">
          <div class="footer-col"><h6>Instagram</h6><a class="footer-handle" href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a></div>
          <div class="footer-col"><h6>TikTok</h6><a class="footer-handle" href="https://www.tiktok.com/@rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a></div>
        </div>
        <div class="footer-contact">
          <div class="footer-col"><h6>Ota yhteyttä</h6><a class="footer-link" href="mailto:aaltonen96@outlook.com">aaltonen96@outlook.com</a></div>
          <div class="footer-col"><div class="footer-ytunnus">Y-3436822-5</div>
            <div class="mt-2 flex flex-col gap-1 text-sm">
              <a class="footer-link" href="legal/privacy.html" target="_blank" rel="noopener">Tietosuojaseloste (PDF)</a>
              <a class="footer-link" href="legal/terms.html" target="_blank" rel="noopener">Toimitus- ja sopimusehdot (PDF)</a>
            </div>
          </div>
        </div>
        <div class="footer-logoBox"><span class="svg-logo svg-logo--footer logo-light" role="img" aria-label="RUMAT STUDIO"></span></div>
      </div>
      <div class="footer-copy">© <span id="year"></span> RUMAT STUDIO</div>
    </footer>
  </main>

  <!-- OSTOSKORI -->
  <div id="cartDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="closeCart" aria-label="Sulje ostoskori"></div>
    <div class="panel p-5 flex flex-col">
      <div class="flex items-center justify-between mb-4"><h3 class="text-xl">Ostoskori</h3><button id="closeCartX" class="text-stone-500 hover:text-stone-800">✕</button></div>
      <div id="cartItems" class="flex-1 overflow-auto divide-y"></div>
      <div class="mt-4 space-y-3">
        <div class="text-sm grid grid-cols-2 gap-y-1"><div class="text-[color:#202020]/70">Välisumma</div><div class="text-right" id="subTotal">€0,00</div></div>
        <button id="checkout" class="btn bg-[color:var(--deep-blue)] text-white rounded-full px-4 py-2">Kassalle</button>
        <div id="paypalWarn" class="text-xs text-[color:#202020]/70"></div>
      </div>
    </div>
  </div>

  <!-- KASSA -->
  <div id="checkoutDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="closeCheckout" aria-label="Sulje kassa"></div>
    <div class="panel p-6 flex flex-col">
      <div class="flex items-center justify-between mb-4"><h3 class="text-xl">Kassa</h3><button id="closeCheckoutX" class="text-stone-500 hover:text-stone-800">✕</button></div>
      <form id="checkoutForm" class="flex-1 overflow-auto space-y-3">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div><label class="text-sm font-semibold">Etunimi</label><input required name="firstName" class="w-full mt-1 border rounded px-3 py-2"/></div>
          <div><label class="text-sm font-semibold">Sukunimi</label><input required name="lastName" class="w-full mt-1 border rounded px-3 py-2"/></div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div><label class="text-sm font-semibold">Sähköposti</label><input required type="email" name="email" class="w-full mt-1 border rounded px-3 py-2"/></div>
          <div><label class="text-sm font-semibold">Puhelin (valinn.)</label><input name="phone" class="w-full mt-1 border rounded px-3 py-2"/></div>
        </div>
        <div><label class="text-sm font-semibold">Osoite</label><input required name="address" class="w-full mt-1 border rounded px-3 py-2"/></div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
          <div><label class="text-sm font-semibold">Postinumero</label><input required name="zip" class="w-full mt-1 border rounded px-3 py-2"/></div>
          <div><label class="text-sm font-semibold">Kaupunki</label><input required name="city" class="w-full mt-1 border rounded px-3 py-2"/></div>
          <div><label class="text-sm font-semibold">Maa</label><input required name="country" class="w-full mt-1 border rounded px-3 py-2" value="Suomi"/></div>
        </div>
        <div><label class="text-sm font-semibold">Lisätiedot (valinn.)</label><textarea name="notes" rows="3" class="w-full mt-1 border rounded px-3 py-2"></textarea></div>
        <label class="flex gap-2 items-start text-sm">
          <input type="checkbox" id="acceptDigitalWaiver" required>
          <span>Hyväksyn, että digitaalisen sisällön toimittaminen alkaa heti, enkä voi peruuttaa ostosta (KSL 6:16).<br><a class="underline" href="legal/terms.html" target="_blank" rel="noopener">Lue Toimitus- ja sopimusehdot (PDF)</a></span>
        </label>
      </form>
      <div class="mt-4 flex items-center justify-between gap-3">
        <button id="checkoutBack" class="btn">Takaisin</button>
        <button id="checkoutPay" class="btn bg-[color:var(--deep-blue)] text-white">Jatka maksamaan</button>
      </div>
      <p class="text-xs text-stone-500 mt-2">Huom: Maksulliset tuotteet maksetaan PayPalissa (myyjä: <strong>aaltonen96@outlook.com</strong>). Ilmaiset tilaukset vahvistetaan heti.</p>
    </div>
  </div>

  <!-- VALIKKO -->
  <div id="menuDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="closeMenu" aria-label="Sulje valikko"></div>
    <div class="panel p-6 flex flex-col gap-4">
      <div class="flex items-center justify-between"><h3 class="text-xl">Valikko</h3><button id="closeMenuX" class="text-stone-500 hover:text-stone-800">✕</button></div>
      <nav class="flex flex-col gap-3 text-lg">
        <a href="#mikaonrumat" class="py-2 border-b" data-menu-close>Mikä on RUMAT?</a>
        <a href="#kaaviot" class="py-2 border-b" data-menu-close>Kaavat</a>
        <a href="#suunnittelija" class="py-2 border-b" data-menu-close>Suunnittelija</a>
        <a href="#yhteys" class="py-2" data-menu-close>Ota yhteyttä</a>
      </nav>
    </div>
  </div>

  <script>
  /* ===== Apurit ===== */
  const fmtEUR = x => new Intl.NumberFormat('fi-FI',{style:'currency',currency:'EUR'}).format(x);
  const $ = s => document.querySelector(s);
  const el=(t,a={},...k)=>{const n=document.createElement(t);Object.entries(a).forEach(([k2,v])=>{if(k2==='class')n.className=v;else if(k2==='html')n.innerHTML=v;else if(k2.startsWith('on'))n.addEventListener(k2.slice(2),v);else n.setAttribute(k2,v)});k.forEach(c=>{if(c==null)return; if(typeof c==='string') n.appendChild(document.createTextNode(c)); else n.appendChild(c)});return n};
  (function(){ const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear(); })();

  function parasToHTML(s){ return String(s||'').trim().split(/\n\s*\n/).map(p=>`<p>${p.trim()}</p>`).join('\n'); }
  const defaultContent={ pitch:`RUMAT STUDIO syntyi lapsuuden haaveesta ja vuosien aikana kypsyneestä intohimosta vaatesuunnitteluun. Vuonna 2023 visio alkoi muovautumaan nykyiseen muotoonsa: ajattomia ja kestäviä vaatteita, jotka syntyvät harkitusta rakkaudesta ja intohimosta luovaan tekemiseen.

RUMAT STUDIO pohjautuu vahvaan arvopohjaan. Se ei ole pelkkä tuotemerkki, vaan se rohkaisee pohtimaan omaa kulutuskäyttäytymistä ja inspiroi tekemään itse tai ainakin arvostamaan vaatteiden alkuperää ja tekijöitä niiden takana.

Taustalla on halu luoda ajattomia, kestäviä ja harkiten suunniteltuja vaatteita vastalauseena kertakäyttöiselle pikamuodille. Jokainen vaate suunnitellaan kestämään sekä käytössä että ajassa. Suunnittelussa otetaan huomioon materiaalien laatu, vaatteen käyttötarkoitus ja visuaalinen ilme, mutta myös tuotannon ekologinen ja eettinen kestävyys. Käsityönä valmistetut vaatteet vaativat aikaa ja siten nostavat vaatteen arvoa niin konkreettisesti kuin tunnearvossakin.

Tulevaisuuden suunnitelmissa on oman studiollisen avaaminen pääkaupunkiseudulle. Tila toimisi kohtaamispaikkana, jossa voi sovittaa mallikappaleita, osallistua työpajoihin ja verkostoitua muiden kestävästä arvosta kiinnostuneiden muotoilijoiden, ompelijoiden ja suunnittelijoiden kanssa.

Jokainen “liian RUMAT ollakseen totta” -tuote on suunniteltu huolella merkityksellisyydestä käyttömukavuuteen asti. Tavoitteena ei ole täydellisyys, vaan rohkeus ja kehitys. Nimi RUMAT STUDIO viittaa juuri tähän: lapsen sallittuun keskeneräisyyteen, mutta tähdätä silti johonkin merkitykselliseen.` };
  (function(){
    const introText=$('#intro-text'); if(introText) introText.innerHTML=parasToHTML(defaultContent.pitch);

    function setBg(el,url){ if(!el) return; const t=new Image(); t.onload=()=>el.style.backgroundImage=`url('${url}')`; t.onerror=()=>el.style.backgroundImage=`url('assets/placeholder.jpg')`; t.src=url; }

    // Vasen kuva (kiinni vasempaan reunaan)
    setBg(document.querySelector('.intro-left'),'assets/intro-left.jpg');

    // Oikea kuva DOMISSA ENNEN TEKSTIÄ → teksti yltää oikeaan reunaan, kunnes kuva osuu kohdalle
    const right=document.createElement('div'); right.className='intro-img intro-right'; right.setAttribute('aria-hidden','true'); setBg(right,'assets/intro-right.jpg');
    const flow=document.getElementById('introFlow'); const copy=flow.querySelector('.intro-copy'); flow.insertBefore(right, copy);
  })();

  /* ===== Tuotedata & ostoskori ===== */
  const IMG=(id,n=1)=>`assets/patterns/${id}-${n}.jpg`;
  window.KAAVIOT=[
    {id:'dummy-kaava',name:'Dummy kaava',price:0.01,sizes:'PDF',blurb:'Väliaikainen testikaava – korvataan myöhemmin.',images:[IMG('dummy-kaava',1),IMG('dummy-kaava',2)],isDummy:true,deliverable:true,file:'auto-dummy'},
    {id:'ilmainen-ohje',name:'Ilmainen ohje',price:0.00,sizes:'One size',blurb:'Ilmainen ohje (dummy-PDF).',images:[IMG('ilmainen-ohje',1)],deliverable:true,file:'auto-dummy'},
    {id:'takki',name:'Takki',price:0.01,sizes:'XS–XL',blurb:'Tulossa.',images:[IMG('takki',1)],deliverable:false}
  ];

  let CART=JSON.parse(localStorage.getItem('cart')||'{}');
  function saveCart(){ localStorage.setItem('cart',JSON.stringify(CART)); updateBadge(); }
  function updateBadge(){ const n=Object.values(CART).reduce((a,b)=>a+b,0); const ic=$('#cartCount'); const tx=$('#cartCountText'); if(ic) ic.textContent=String(n); if(tx) tx.textContent=n?`(${n})`:''; }
  const $drawer=$('#cartDrawer'); function openCart(){ $drawer.classList.add('open'); renderCart(); } function closeCart(){ $drawer.classList.remove('open'); }
  $('#openCartText')?.addEventListener('click',openCart); $('#openCartIcon')?.addEventListener('click',openCart); $('#closeCart')?.addEventListener('click',closeCart); $('#closeCartX')?.addEventListener('click',closeCart);

  function renderCart(){ const root=$('#cartItems'); root.innerHTML=''; let sub=0;
    Object.entries(CART).forEach(([id,q])=>{ const p=window.KAAVIOT.find(x=>x.id===id); if(!p) return; sub+=(p.price||0)*q;
      root.appendChild(el('div',{class:'py-3 flex items-center justify-between gap-3'},
        el('div',{}, el('div',{class:'font-semibold'},p.name), el('div',{class:'text-sm opacity-70'}, fmtEUR(p.price||0))),
        el('div',{class:'flex items-center gap-2'},
          el('button',{'data-dec':id,class:'px-2 border border-[rgba(0,0,0,.15)] rounded'},'−'),
          el('span',{},String(q)),
          el('button',{'data-inc':id,class:'px-2 border border-[rgba(0,0,0,.15)] rounded'},'+'),
          el('button',{'data-remove':id,class:'px-2 border border-[rgba(0,0,0,.15)] rounded'},'Poista')
        )
      ));
    });
    $('#subTotal').textContent=fmtEUR(sub);
    root.querySelectorAll('[data-remove]').forEach(b=>b.onclick=()=>{ const id=b.dataset.remove; delete CART[id]; saveCart(); renderCart(); });
    root.querySelectorAll('[data-inc]').forEach(b=>b.onclick=()=>{ const id=b.dataset.inc; CART[id]=(CART[id]||0)+1; saveCart(); renderCart(); });
    root.querySelectorAll('[data-dec]').forEach(b=>b.onclick=()=>{ const id=b.dataset.dec; CART[id]=Math.max(0,(CART[id]||0)-1); if(CART[id]===0) delete CART[id]; saveCart(); renderCart(); });
  }
  function canDeliver(p){ return !!(p&&(p.deliverable||p.isDummy||p.file)); }
  function addToCart(id){ const p=window.KAAVIOT.find(x=>x.id===id); if(!p) return; if(!canDeliver(p)){ alert('Tuote on tulossa – ei vielä myynnissä.'); return; } CART[id]=(CART[id]||0)+1; saveCart(); openCart(); }
  window.addToCart=addToCart; updateBadge();

  /* ===== Kassa: avaus/sulku (UI) ===== */
  const checkoutDrawer=$('#checkoutDrawer');
  function openCheckout(){ checkoutDrawer.classList.add('open'); }
  function closeCheckout(){ checkoutDrawer.classList.remove('open'); }
  $('#checkout')?.addEventListener('click', ()=>{ if(Object.keys(CART).length===0) return alert('Ostoskori on tyhjä.'); closeCart(); openCheckout(); });
  $('#closeCheckout')?.addEventListener('click', closeCheckout);
  $('#closeCheckoutX')?.addEventListener('click', closeCheckout);
  $('#checkoutBack')?.addEventListener('click', (e)=>{ e.preventDefault(); closeCheckout(); openCart(); });

  /* ===== Nav & menu ===== */
  (function(){
    const container=$('#hdrRow'), brand=$('#brandBlock'), nav=$('#mainNav'), right=$('#rightBlock'), menuBtn=$('#openMenu'), cartIcon=$('#openCartIcon'), cartText=$('#openCartText');
    let navVisible=true; const GAP=72;
    function measureNavWidth(){ const was=nav.classList.contains('nav-hidden'); if(was) nav.classList.remove('nav-hidden'); nav.classList.add('nav-measure'); const w=Math.ceil(nav.scrollWidth); nav.classList.remove('nav-measure'); if(was) nav.classList.add('nav-hidden'); return w; }
    function canShowNav(){ const cw=container.clientWidth; const bw=Math.ceil(brand.getBoundingClientRect().width); const rbw=Math.ceil(right.getBoundingClientRect().width); const navW=measureNavWidth(); return navW<=Math.max(0,cw-bw-rbw-GAP); }
    function applyState(show){ navVisible=!!show; if(navVisible){ nav.classList.remove('nav-hidden'); menuBtn.classList.add('hidden'); cartIcon.classList.add('hidden'); cartText.classList.remove('hidden'); } else { nav.classList.add('nav-hidden'); menuBtn.classList.remove('hidden'); cartIcon.classList.remove('hidden'); cartText.classList.add('hidden'); } }
    function compute(){ if(navVisible){ if(!canShowNav()) applyState(false); } else { if(canShowNav()) applyState(true); } }
    let t=null; const schedule=()=>{ if(t) return; t=setTimeout(()=>{ t=null; compute(); },80); };
    addEventListener('resize',schedule,{passive:true}); if('fonts' in document) document.fonts.ready.then(compute); compute();

    // Menu drawer
    (function(){ const drawer=$('#menuDrawer'), openBtn=$('#openMenu'), closeA=$('#closeMenu'), closeX=$('#closeMenuX');
      function open(){ drawer.classList.add('open'); openBtn.setAttribute('aria-expanded','true'); }
      function close(){ drawer.classList.remove('open'); openBtn.setAttribute('aria-expanded','false'); }
      openBtn.addEventListener('click',open); closeA?.addEventListener('click',close); closeX?.addEventListener('click',close);
      drawer.addEventListener('click',e=>{ if(e.target===drawer) close(); }); document.addEventListener('keydown',e=>{ if(e.key==='Escape') close(); });
      drawer.querySelectorAll?.('[data-menu-close]')?.forEach(a=>a.addEventListener('click',close));
    })();
  })();

  /* ===== Kaaviot UI ===== */
  (function(){
    const grid=$('#patternsGrid'); let selectedId=null; let expander=null; let current=null; let imgIdx=0; const DATA=window.KAAVIOT;
    const createImg=(src,alt)=>{ const im=document.createElement('img'); im.src=src||'assets/placeholder.jpg'; im.alt=alt||''; im.onerror=()=>{im.src='assets/placeholder.jpg'}; return im; };

    DATA.forEach(p=>{ const tile=document.createElement('article'); tile.className='tile card'; tile.setAttribute('data-id',p.id);
      const img=createImg((p.images||[])[0],p.name); const cap=document.createElement('div'); cap.className='tile-caption';
      const deliver=canDeliver(p); cap.textContent=p.name + (!deliver?' · Tulossa':(p.price===0?' · Ilmainen':'')); tile.appendChild(img); tile.appendChild(cap); grid.appendChild(tile);
    });
    function columns(){ const cs=getComputedStyle(grid).gridTemplateColumns; return Math.max(1,cs.split(' ').length); }
    function buildExpander(){ expander=el('div',{class:'expander'}); const top=el('div',{class:'ex-top'}, el('div',{id:'exTitle',class:'font-semibold'},''), el('button',{id:'exClose',class:'px-3 py-1 rounded border border-[rgba(0,0,0,.15)]'},'pienennä')); const row=el('div',{class:'ex-row'},
        el('div',{class:'ex-view'}, createImg('assets/placeholder.jpg','Kaava'), el('button',{id:'exPrev',class:'ex-prev'},'◀'), el('button',{id:'exNext',class:'ex-next'},'▶')),
        el('div',{class:'ex-info'}, el('h3',{id:'exName',class:'text-2xl mb-2'},''), el('div',{style:'height:8px'}), el('p',{id:'exBlurb',class:'opacity-80 mb-2 normalcase'},''), el('div',{class:'mb-2'}, el('span',{class:'font-semibold'},'Koot: '), el('span',{id:'exSizes'},'')), el('div',{id:'exPrice',class:'text-xl font-bold mb-4'},''), el('div',{id:'exActions'}))
    ); expander.appendChild(top); expander.appendChild(row);
      expander.querySelector('#exPrev').addEventListener('click',()=>nav(-1)); expander.querySelector('#exNext').addEventListener('click',()=>nav(+1)); expander.querySelector('#exClose').addEventListener('click',()=>clearSelection()); }
    function insertAfterRow(tileEl){ if(!expander) buildExpander(); const tiles=[...grid.querySelectorAll('.tile')]; const idx=tiles.indexOf(tileEl); const cols=columns(); const rowEndIdx=Math.min(tiles.length-1,Math.floor(idx/cols)*cols+(cols-1)); grid.insertBefore(expander, tiles[rowEndIdx].nextSibling); }
    function openFor(p,tileEl){ current=p; imgIdx=0; expander.querySelector('#exTitle').textContent=p.name; expander.querySelector('#exName').textContent=p.name; expander.querySelector('#exBlurb').textContent=p.blurb||''; expander.querySelector('#exSizes').textContent=p.sizes||''; expander.querySelector('#exPrice').textContent=p.price===0?'ILMAINEN':fmtEUR(p.price||0); expander.querySelector('.ex-view img').src=(p.images||[])[0]||'assets/placeholder.jpg';
      const actions=expander.querySelector('#exActions'); actions.innerHTML=''; const deliver=canDeliver(p);
      if(!deliver){ actions.appendChild(el('span',{class:'inline-block px-4 py-2 rounded-full border border-[rgba(0,0,0,.15)]'},'Tulossa')); }
      else { const buyBtn=el('button',{class:'btn bg-[color:var(--deep-blue)] text-white rounded-full px-4 py-2'}, p.price===0?'Lisää ostoskoriin (0,00 €)':'Lisää ostoskoriin'); buyBtn.onclick=()=>window.addToCart&&window.addToCart(p.id); actions.appendChild(buyBtn); }
      insertAfterRow(tileEl);
    }
    function nav(d){ if(!current) return; const imgs=current.images||[]; imgIdx=imgs.length?(imgIdx+d+imgs.length)%imgs.length:0; expander.querySelector('.ex-view img').src=imgs[imgIdx]||'assets/placeholder.jpg'; }
    function clearSelection(){ if(!selectedId) return; const prev=grid.querySelector(`.tile[data-id="${selectedId}"]`); if(prev) prev.classList.remove('tile--selected'); expander?.remove(); selectedId=null; current=null; imgIdx=0; }
    grid.addEventListener('click',e=>{ const tile=e.target.closest('.tile'); if(!tile) return; if(tile.dataset.id===selectedId){ clearSelection(); return; } clearSelection(); selectedId=tile.dataset.id; tile.classList.add('tile--selected'); openFor(window.KAAVIOT.find(x=>x.id===selectedId), tile); });
    addEventListener('resize',()=>{ if(!selectedId||!expander?.parentNode) return; const tile=grid.querySelector(`.tile[data-id="${selectedId}"]`); if(tile) insertAfterRow(tile); },{passive:true});
  })();
  </script>
</body>
</html>
