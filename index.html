<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RUMAT.STUDIO</title>
  <meta name="description" content="Helsinki — Contemporary textiles, built to last."/>

  <!-- Fontit + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Inter:wght@400;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      /* Brändi + sivun värit */
      --brand-green: #0E2016;  /* Spruce tumma (kuvabändien otsikoissa aiemmin) */
      --footer-black:#0B0F0E;  /* footerin musta */
      --brand-ink:   #202020;  /* mustanharmaa teksti */
      --brand-ivory: #F6F6F4;  /* kuvapalkkien tausta */
      --band-pale:   #DEEEEE;  /* esittelypalkkien tausta */
    }
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;
      background:var(--brand-ivory);
      color:#1f2937;
      overscroll-behavior-y:none;
    }
    .serif{font-family:"Libre Baskerville",serif}
    /* Hero-canvaksen kontti: aina taustalla */
    .hero-fixed{position:fixed;inset:0;z-index:-1}
    .shadow-soft{box-shadow:0 6px 20px rgba(0,0,0,.12)}
    .btn{border-radius:9999px;padding:.65rem 1.05rem;border:1px solid rgb(214 211 209);
         transition:transform .06s ease, box-shadow .12s ease, background-color .15s;}
    .btn:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .btn-dark{ background:#0b0f0e; color:#f8fafb; border-color:#0b0f0e; }
    .btn-olive{ background:#A1A266; color:#202020; border-color:#8f945a; }
    .chip{font-size:.78rem; padding:.28rem .6rem; border-radius:9999px; border:1px solid rgb(214 211 209); background:#fff; color:#374151;}
    .chip-olive{ border-color:#A1A266; color:#A1A266; }
  </style>
</head>

<body class="text-stone-900">
  <!-- ===== HERO: WebGL revontulet ===== -->
  <div class="hero-fixed">
    <canvas id="aurora" style="width:100%;height:100%;display:block"></canvas>
    <!-- Fallback-kuva jos WebGL ei toimi -->
    <img id="hero-fallback"
         alt="Lapin yö"
         style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none"
         src="https://images.unsplash.com/photo-1564857170582-80855988d55e?auto=format&fit=crop&w=2400&q=80">
  </div>

  <!-- Yläpalkin värikaista joka liikkuu heron mukana (ohut) -->
  <div class="h-14 md:h-16 w-full" style="background:rgba(14,32,22,.92);"></div>

  <!-- ===== Kiinteä HEADER (logo + navigaatio) ===== -->
  <header class="fixed top-0 left-0 right-0 z-50 text-white">
    <div class="relative mx-auto max-w-6xl px-4 py-3 grid grid-cols-3 items-center">
      <a href="#etusivu" class="flex items-center gap-3">
        <!-- Paksu R kaadettuna 90° -->
        <div class="h-10 w-10 grid place-items-center rounded-xl border border-white/55 bg-white/92">
          <span class="font-black text-[22px] leading-none text-[color:var(--brand-green)] transform rotate-90 select-none">R</span>
        </div>
        <span class="hidden sm:inline text-sm uppercase tracking-widest font-semibold drop-shadow">RUMAT.STUDIO</span>
      </a>

      <nav class="justify-self-center flex items-center gap-6 text-[13px] uppercase tracking-widest">
        <a href="#etusivu"   class="font-semibold hover:underline underline-offset-4">Etusivu</a>
        <a href="#tuotteet"  class="font-semibold hover:underline underline-offset-4">Tuotteet</a>
        <a href="#tarina"    class="font-semibold hover:underline underline-offset-4">Tarina</a>
        <a href="#yhteys"    class="font-semibold hover:underline underline-offset-4">Yhteystiedot</a>
      </nav>
      <div></div>
    </div>
  </header>

  <!-- ===== HERO-tekstit ===== -->
  <section id="etusivu" class="h-[calc(100vh-56px)] md:h-[calc(100vh-64px)] grid place-items-center text-stone-50 px-4">
    <div id="hero-text" class="text-center transition-transform">
      <h1 class="uppercase font-semibold tracking-[0.28em]
                 text-[clamp(22px,4.2vw,52px)]
                 drop-shadow-[0_2px_16px_rgba(0,0,0,0.40)]">
        LIIAN RUMAT OLLAKSEEN TOTTA
      </h1>
      <div class="mt-9 flex justify-center">
        <div class="h-28 w-28 sm:h-32 sm:w-32 grid place-items-center
                    rounded-full bg-white/92 ring-1 ring-white/70 shadow-soft">
          <span class="font-black text-6xl sm:text-7xl leading-none text-stone-900 transform rotate-90 select-none">R</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Esittelypalkki (kokosivuinen, #DEEEEE) ===== -->
  <section class="py-12" style="background:var(--band-pale)">
    <div class="mx-auto max-w-3xl px-6 text-center">
      <p class="text-xl sm:text-2xl">
        Pienet erät. Kestävä käyttö. Pohjoiset sävyt. Valmistamme pieniä eriä Suomessa ja EU:ssa, jotta vaate kestää vuosia ja tekijät näkyvät.
      </p>
    </div>
  </section>

  <!-- ===== TUOTTEET ===== -->
  <section id="tuotteet">
    <!-- Kuvapalkki (tausta #F6F6F4) -->
    <div style="background:var(--brand-ivory)">
      <div class="mx-auto max-w-6xl px-4 py-14">
        <div class="flex items-center justify-between mb-6">
          <h2 class="serif text-3xl">Tuotteet</h2>
          <div class="text-xs text-stone-600">Hinnat sis. ALV • Palautus 14 vrk</div>
        </div>

        <!-- Karuselli: LAUKKU -->
        <div class="relative">
          <div class="grid md:grid-cols-2 gap-4 md:gap-6">
            <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200 bg-white">
              <img id="p1a" class="w-full h-full object-cover" alt="Laukku 1" loading="lazy" decoding="async">
            </div>
            <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200 bg-white">
              <img id="p1b" class="w-full h-full object-cover" alt="Laukku 2" loading="lazy" decoding="async">
            </div>
          </div>
          <button id="prev1" class="absolute left-2 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/90 backdrop-blur border border-stone-300 shadow-soft" aria-label="Edelliset kuvat">◀</button>
          <button id="next1" class="absolute right-2 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/90 backdrop-blur border border-stone-300 shadow-soft" aria-label="Seuraavat kuvat">▶</button>
        </div>
      </div>
    </div>

    <!-- Esittelypalkki (kokosivuinen #DEEEEE) -->
    <section style="background:var(--band-pale)">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <div class="text-center">
          <h3 class="serif text-2xl">Laukku</h3>
          <p class="mt-1 text-stone-700">
            Täysin kierrätysmateriaaleista valmistettu sling-laukku. Kierrätetty purjekangas/tekstiili, hihna käytetystä turvavyöstä, metalliosat uudelleenkäytettyä varastoa.
            Ulkomitat: 28 × 16 × 7 cm. Valmistettu Suomessa.
          </p>
          <div class="mt-2 font-semibold">€149,00</div>

          <div class="mt-4 flex items-center justify-center gap-2">
            <span class="chip">Nouto (sovitusti) — 0 €</span>
            <span class="chip chip-olive">Posti — 6,90 €</span>
          </div>

          <div class="mt-3 flex items-center justify-center gap-3 flex-wrap">
            <!-- NOUTO 0 € -->
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
              <input type="hidden" name="cmd" value="_xclick">
              <input type="hidden" name="business" value="kauppa@esimerkki.fi"><!-- VAIHDA OMA PAYPAL -->
              <input type="hidden" name="item_name" value="Laukku (nouto)">
              <input type="hidden" name="amount" value="149.00">
              <input type="hidden" name="currency_code" value="EUR">
              <input type="hidden" name="shipping" value="0.00">
              <input type="hidden" name="no_shipping" value="1">
              <input type="submit" value="Osta – Nouto 0 €" class="btn btn-dark cursor-pointer">
            </form>
            <!-- POSTI 6,90 € -->
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
              <input type="hidden" name="cmd" value="_xclick">
              <input type="hidden" name="business" value="kauppa@esimerkki.fi">
              <input type="hidden" name="item_name" value="Laukku (posti)">
              <input type="hidden" name="amount" value="149.00">
              <input type="hidden" name="currency_code" value="EUR">
              <input type="hidden" name="shipping" value="6.90">
              <input type="hidden" name="no_shipping" value="2">
              <input type="submit" value="Osta – Posti 6,90 €" class="btn btn-olive cursor-pointer">
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Kuvapalkki: PIPO (tausta #F6F6F4) -->
    <div style="background:var(--brand-ivory)">
      <div class="mx-auto max-w-6xl px-4 py-14">
        <div class="relative">
          <div class="grid md:grid-cols-2 gap-4 md:gap-6">
            <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200 bg-white">
              <img id="p2a" class="w-full h-full object-cover" alt="RUMAT Pipo 1" loading="lazy" decoding="async">
            </div>
            <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200 bg-white">
              <img id="p2b" class="w-full h-full object-cover" alt="RUMAT Pipo 2" loading="lazy" decoding="async">
            </div>
          </div>

          <button id="prev2" class="absolute left-2 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/90 backdrop-blur border border-stone-300 shadow-soft" aria-label="Edelliset kuvat">◀</button>
          <button id="next2" class="absolute right-2 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/90 backdrop-blur border border-stone-300 shadow-soft" aria-label="Seuraavat kuvat">▶</button>
        </div>
      </div>
    </div>

    <!-- Esittelypalkki: PIPO (#DEEEEE) -->
    <section style="background:var(--band-pale)">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <div class="text-center">
          <h3 class="serif text-2xl">RUMAT Pipo</h3>
          <p class="mt-1 text-stone-700">Käsinneulottu mohair-sekoite. Korkeus n. 22 cm. Päänympärys 54–58 cm (joustava).</p>
          <div class="mt-2 font-semibold">€59,00</div>

          <div class="mt-4 flex items-center justify-center gap-2">
            <span class="chip">Nouto (sovitusti) — 0 €</span>
            <span class="chip chip-olive">Posti — 6,90 €</span>
          </div>

          <div class="mt-3 flex items-center justify-center gap-3 flex-wrap">
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
              <input type="hidden" name="cmd" value="_xclick">
              <input type="hidden" name="business" value="kauppa@esimerkki.fi">
              <input type="hidden" name="item_name" value="RUMAT Pipo (nouto)">
              <input type="hidden" name="amount" value="59.00">
              <input type="hidden" name="currency_code" value="EUR">
              <input type="hidden" name="shipping" value="0.00">
              <input type="hidden" name="no_shipping" value="1">
              <input type="submit" value="Osta – Nouto 0 €" class="btn btn-dark cursor-pointer">
            </form>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
              <input type="hidden" name="cmd" value="_xclick">
              <input type="hidden" name="business" value="kauppa@esimerkki.fi">
              <input type="hidden" name="item_name" value="RUMAT Pipo (posti)">
              <input type="hidden" name="amount" value="59.00">
              <input type="hidden" name="currency_code" value="EUR">
              <input type="hidden" name="shipping" value="6.90">
              <input type="hidden" name="no_shipping" value="2">
              <input type="submit" value="Osta – Posti 6,90 €" class="btn btn-olive cursor-pointer">
            </form>
          </div>
        </div>
      </div>
    </section>
  </section>

  <!-- ===== TARINA ===== -->
  <section id="tarina" class="py-14 bg-stone-50/90">
    <div class="mx-auto max-w-3xl px-6">
      <h2 class="serif text-3xl">Tarina</h2>
      <p>
        Kirjoita tähän yrityksen matkaa: miksi perustit, mitä opit, minne olet menossa.
        Tekstiä voi muuttaa milloin vain (admin tai koodimuutos).
      </p>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer id="yhteys" class="pt-14 text-[color:var(--brand-ivory)]" style="background:var(--footer-black)">
    <div class="mx-auto max-w-6xl px-4 grid sm:grid-cols-3 gap-8">
      <div>
        <div class="uppercase tracking-wide">RUMAT.STUDIO</div>
        <div class="text-sm mt-1 text-white/70">
          Helsinki — Contemporary textiles, built to last.
        </div>
      </div>
      <div>
        <h5 class="text-sm text-white/70">Yhteys</h5>
        <ul class="mt-2 space-y-2 text-sm">
          <li><a href="mailto:hello@rumat.fi" class="hover:underline">hello@rumat.fi</a></li>
          <li><a href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer" class="hover:underline">Instagram</a></li>
          <li>Rovaniemi — Helsinki</li>
        </ul>
      </div>
      <div>
        <h5 class="text-sm text-white/70">Tilaukset</h5>
        <ul class="mt-2 space-y-2 text-sm">
          <li>Nouto (sovitusti) — 0 €</li>
          <li>Posti — 6,90 € (lisätään kassalla)</li>
          <li>Hinnat sisältävät ALV:n • Palautus 14 vrk</li>
        </ul>
      </div>
    </div>
    <div class="py-8 text-center text-xs text-white/65">
      © <span id="year"></span> RUMAT.STUDIO
    </div>
  </footer>

  <!-- ===== Skriptit ===== -->
  <script>
    /* ---------------- Hero-tekstin pehmeä nosto ---------------- */
    const heroText = document.getElementById('hero-text');
    let lastY = -1;
    const onScroll = () => {
      const y = window.scrollY || 0;
      if (y === lastY) return; lastY = y;
      const vh = window.innerHeight || 1;
      const t = -22 * Math.min(1, y / (vh * 0.9));
      heroText.style.transform = `translateY(${t}vh)`;
      if (window.__aurora && window.__aurora.setScroll) {
        window.__aurora.setScroll(Math.min(1, y / (vh * 0.9)));
      }
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    onScroll();
    document.getElementById('year').textContent = new Date().getFullYear();

    /* ---------------- Tuotekuvakarusellit ---------------- */
    const slingImgs = [
      "https://images.unsplash.com/photo-1548036328-c9fa89d128fa?auto=format&fit=crop&w=1600&q=80",
      "https://images.unsplash.com/photo-1520975922321-6ca0a0a5a0d3?auto=format&fit=crop&w=1600&q=80",
      "https://images.unsplash.com/photo-1511389026070-a14ae610a1be?auto=format&fit=crop&w=1600&q=80"
    ];
    const pipoImgs = [
      "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1600&q=80",
      "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1600&q=80",
      "https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?auto=format&fit=crop&w=1600&q=80"
    ];
    const FALLBACK = "https://placehold.co/1400x1750?text=Kuva";

    function setWithFallback(imgEl, url){
      if(!imgEl) return;
      imgEl.onerror = ()=>{ imgEl.onerror=null; imgEl.src = FALLBACK; };
      imgEl.src = url;
    }

    let i1 = 0, i2 = 0;
    const setPair = (arr, aId, bId, i) => {
      const a = document.getElementById(aId), b = document.getElementById(bId);
      if (!a || !b) return;
      const n = arr.length;
      setWithFallback(a, arr[(i % n + n) % n]);
      setWithFallback(b, arr[((i + 1) % n + n) % n]);
    };

    setPair(slingImgs, "p1a", "p1b", i1);
    setPair(pipoImgs,  "p2a", "p2b", i2);

    document.getElementById('next1').addEventListener('click', () => { i1 = (i1 + 1) % slingImgs.length; setPair(slingImgs, "p1a", "p1b", i1); });
    document.getElementById('prev1').addEventListener('click', () => { i1 = (i1 - 1 + slingImgs.length) % slingImgs.length; setPair(slingImgs, "p1a", "p1b", i1); });

    document.getElementById('next2').addEventListener('click', () => { i2 = (i2 + 1) % pipoImgs.length; setPair(pipoImgs, "p2a", "p2b", i2); });
    document.getElementById('prev2').addEventListener('click', () => { i2 = (i2 - 1 + pipoImgs.length) % pipoImgs.length; setPair(pipoImgs, "p2a", "p2b", i2); });

    /* ---------------- WebGL Revontulet (raw WebGL) ---------------- */
    (function initAurora(){
      const prefersReduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const canvas = document.getElementById('aurora');
      const fallback = document.getElementById('hero-fallback');

      function fail(){ fallback.style.display='block'; }

      if (prefersReduce) { fail(); return; }

      const gl = canvas.getContext('webgl', { premultipliedAlpha:false, antialias:false });
      if (!gl) { fail(); return; }

      const DPR = Math.min(2, window.devicePixelRatio || 1);
      function resize(){
        const w = canvas.clientWidth, h = canvas.clientHeight;
        const W = Math.floor(w * DPR), H = Math.floor(h * DPR);
        if (canvas.width !== W || canvas.height !== H) {
          canvas.width = W; canvas.height = H;
          gl.viewport(0, 0, W, H);
          gl.uniform2f(u_res, W, H);
        }
      }

      const VS = `
        attribute vec2 p;
        varying vec2 vUv;
        void main(){
          vUv = p*0.5 + 0.5;
          gl_Position = vec4(p, 0.0, 1.0);
        }
      `;

      /* ——— PARANNETTU FRAGMENT-SHADER (näkyvät verhot) ——— */
      const FS = `
        precision highp float;
        varying vec2 vUv;
        uniform vec2  u_res;
        uniform float u_time;
        uniform float u_intensity;
        uniform float u_scroll;

        float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7)))*43758.5453); }
        float noise(vec2 p){
          vec2 i=floor(p), f=fract(p);
          float a=hash(i);
          float b=hash(i+vec2(1.,0.));
          float c=hash(i+vec2(0.,1.));
          float d=hash(i+vec2(1.,1.));
          vec2 u=f*f*(3.0-2.0*f);
          return mix(a,b,u.x) + (c-a)*u.y*(1.0-u.x) + (d-b)*u.x*u.y;
        }
        float fbm(vec2 p){
          float v=0.0; float a=0.5;
          v += a*noise(p);          p*=2.02; a*=0.5;
          v += a*noise(p);          p*=2.02; a*=0.5;
          v += a*noise(p);          p*=2.02; a*=0.5;
          v += a*noise(p);          p*=2.02; a*=0.5;
          v += a*noise(p);
          return v;
        }

        void main(){
          vec2 uv = vUv;

          // Syvä sininen tausta
          vec3 base = mix(vec3(0.02,0.05,0.10), vec3(0.01,0.02,0.05), uv.y);

          float t = u_time*0.40;
          float s = u_scroll;

          float curtain = 0.0;
          for (int k=0; k<4; k++) {
            float o = float(k)*0.27;
            vec2 p = vec2(
              uv.x*3.2 + sin((uv.y + o + t*0.7)*2.3)*0.20,
              uv.y*2.3 - t*0.9 - o
            );
            float n = fbm(p);
            float ridges = abs(n - 0.5);
            float band   = smoothstep(0.05, 0.45, 0.5 - ridges);
            band *= (1.0 - pow(uv.y, 0.75));
            float columns = 0.7 + 0.3 * (sin(uv.x*12.0 + t*0.8 + o*3.14)*0.5 + 0.5);
            band *= columns;
            curtain += band;
          }
          curtain = clamp(curtain, 0.0, 1.0);

          vec3 aur = mix(vec3(0.10,0.68,0.30), vec3(0.10,0.85,0.95), uv.y) * curtain;
          float glow = curtain * (0.7 + 0.3*noise(uv*9.0 + t));
          vec3 color = base + (aur*2.0 + vec3(0.06,0.13,0.20)*glow) * (u_intensity*(1.0+0.25*s));

          gl_FragColor = vec4(color, 1.0);
        }
      `;

      function compile(type, src){
        const sh = gl.createShader(type);
        gl.shaderSource(sh, src);
        gl.compileShader(sh);
        if (!gl.getShaderParameter(sh, gl.COMPILE_STATUS)) {
          console.error(gl.getShaderInfoLog(sh));
          return null;
        }
        return sh;
      }
      function program(vs, fs){
        const p = gl.createProgram();
        gl.attachShader(p, compile(gl.VERTEX_SHADER, vs));
        gl.attachShader(p, compile(gl.FRAGMENT_SHADER, fs));
        gl.linkProgram(p);
        if (!gl.getProgramParameter(p, gl.LINK_STATUS)) {
          console.error(gl.getProgramInfoLog(p));
          return null;
        }
        return p;
      }

      const prog = program(VS, FS);
      if (!prog) { fail(); return; }
      gl.useProgram(prog);

      // Fullscreen kolmio (vähemmän reunoja kuin neliössä)
      const buf = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buf);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        -1,-1,  3,-1,  -1, 3
      ]), gl.STATIC_DRAW);
      const loc = gl.getAttribLocation(prog, 'p');
      gl.enableVertexAttribArray(loc);
      gl.vertexAttribPointer(loc, 2, gl.FLOAT, false, 0, 0);

      // Uniformit
      const u_res      = gl.getUniformLocation(prog, 'u_res');
      const u_time     = gl.getUniformLocation(prog, 'u_time');
      const u_intens   = gl.getUniformLocation(prog, 'u_intensity');
      const u_scroll   = gl.getUniformLocation(prog, 'u_scroll');

      gl.uniform1f(u_intens, 2.2);     // nostettu jotta verhot varmasti näkyvät
      gl.uniform1f(u_scroll, 0.0);

      function setScroll(v){ gl.uniform1f(u_scroll, v); }
      window.__aurora = { setScroll };

      function raf(t0){
        resize();
        gl.uniform1f(u_time, (performance.now()/1000));
        gl.drawArrays(gl.TRIANGLES, 0, 3);
        req = requestAnimationFrame(raf);
      }
      let req = requestAnimationFrame(raf);

      // Koko/visibility
      let on = true;
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden && on){ cancelAnimationFrame(req); on=false; }
        else if(!document.hidden && !on){ req=requestAnimationFrame(raf); on=true; }
      });
      addEventListener('resize', resize);
      resize();
    })();
  </script>
</body>
</html>
