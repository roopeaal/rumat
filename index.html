<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RUMAT.STUDIO</title>
  <meta name="description" content="Helsinki — Contemporary textiles, built to last."/>

  <!-- Fontit + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --header-bg:#0B0F0E;     /* header tausta */
      --brand-ink:#202020;     /* mustanharmaa teksti */
      --brand-ivory:#F6F6F4;   /* lämmin vaalea */
      --band-pale:#DEEEEE;     /* esittelypalkit */
      --olive:#A1A266;
    }
    *{box-sizing:border-box}
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;
      color:#111827; background:var(--brand-ivory);
    }
    .serif{font-family:"Libre Baskerville",serif}
    .shadow-soft{box-shadow:0 8px 24px rgba(0,0,0,.12)}
    .btn{border-radius:9999px;padding:.65rem 1.05rem;border:1px solid rgb(214 211 209);
         transition:transform .06s ease, box-shadow .12s ease, background-color .15s;}
    .btn:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .btn-dark{ background:#0b0f0e; color:#f8fafb; border-color:#0b0f0e; }
    .btn-olive{ background:var(--olive); color:#202020; border-color:#8f945a; }

    /* Kiinteä aurora-tausta */
    #aurora-host{position:fixed; inset:0; z-index:-2; overflow:hidden;}
    #aurora{position:absolute; inset:0; width:100%; height:100%; display:block;}

    /* Kuusikko-siluetti + hohde (FIXED) */
    #silhouette-wrap{
      position:fixed; left:0; right:0; bottom:0;
      height:min(28vh,260px);
      pointer-events:none;
      z-index:-1; /* revontulien yläpuolelle, sisällön alle */
    }
    #silhouette-glow{
      position:absolute; left:0; right:0; bottom:-8%;
      height:160%;
      background:
        radial-gradient(50% 120% at 50% 100%,
          rgba(255,255,255,.18) 0%,
          rgba(210,255,240,.10) 35%,
          rgba(0,0,0,0) 70%);
      filter: blur(22px);
      opacity:.75;
    }
    #silhouette-svg{
      position:absolute; left:0; right:0; bottom:0; width:100%; height:100%;
    }
    #silhouette-svg .base{ fill:#0B0F0E; }
    #silhouette-svg .fade{ fill:url(#fade); opacity:.85; }
    #silhouette-svg .smoke{ filter: blur(2.2px); opacity:.55; }

    /* Header */
    header{background:var(--header-bg);}
    header .nav a{letter-spacing:.18em}

    /* Hero-typografia (sirompi) */
    .hero-title{
      letter-spacing:.22em;
      font-weight:600;    /* aiempaa kevyempi */
    }

    /* Kori (overlay) */
    .cart-modal{position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:60}
    .cart-box{background:#fff; border-radius:16px; width:min(720px,92vw); max-height:86vh; overflow:auto; padding:18px}
    .row{display:flex; gap:12px; align-items:center; justify-content:space-between}

    /* Sosiaalit iframeille parempi responsi */
    .embed-16x9{position:relative; width:100%; padding-top:56.25%}
    .embed-16x9 iframe, .embed-16x9 blockquote{position:absolute; inset:0; width:100%; height:100%}

    /* Ankkureille header-offset */
    section[id]{scroll-margin-top:88px}
  </style>
</head>
<body>

  <!-- AURORA (kiinteä tausta) -->
  <div id="aurora-host" aria-hidden="true">
    <canvas id="aurora"></canvas>
  </div>

  <!-- SILUETTI + HOHDE (kiinteä, revontulien päällä) -->
  <div id="silhouette-wrap" aria-hidden="true">
    <div id="silhouette-glow"></div>
    <svg id="silhouette-svg" viewBox="0 0 1000 300" preserveAspectRatio="none">
      <defs>
        <linearGradient id="fade" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#0B0F0E"/>
          <stop offset="1" stop-color="#0B0F0E" stop-opacity="0"/>
        </linearGradient>
        <symbol id="spruce" viewBox="0 0 100 160">
          <polygon points="50,0 10,45 90,45"/>
          <polygon points="50,22 16,75 84,75"/>
          <polygon points="50,55 22,110 78,110"/>
          <rect x="46" y="110" width="8" height="35" rx="2" ry="2"/>
        </symbol>
      </defs>
      <path class="base" d="M0,250 C220,220 380,280 520,260 C720,225 860,260 1000,235 L1000,300 L0,300 Z"/>
      <g class="base" opacity="1">
        <use href="#spruce" x="18"  y="105" width="120" height="180"/>
        <use href="#spruce" x="105" y="125" width="85"  height="140"/>
        <use href="#spruce" x="160" y="115" width="95"  height="155"/>
        <use href="#spruce" x="220" y="140" width="70"  height="120"/>
        <use href="#spruce" x="265" y="130" width="80"  height="130"/>
      </g>
      <g class="base" opacity="1">
        <use href="#spruce" x="360" y="118" width="100" height="160"/>
        <use href="#spruce" x="430" y="140" width="78"  height="125"/>
        <use href="#spruce" x="485" y="128" width="92"  height="148"/>
        <use href="#spruce" x="560" y="145" width="74"  height="118"/>
      </g>
      <g class="base" opacity="1">
        <use href="#spruce" x="640" y="120" width="105" height="168"/>
        <use href="#spruce" x="715" y="138" width="82"  height="132"/>
        <use href="#spruce" x="770" y="128" width="96"  height="150"/>
        <use href="#spruce" x="835" y="142" width="78"  height="126"/>
        <use href="#spruce" x="900" y="110" width="120" height="182"/>
      </g>
      <g class="base" transform="translate(740,170)">
        <rect x="0" y="70" width="68" height="42" rx="2"/>
        <polygon points="0,70 34,42 68,70"/>
        <rect x="10" y="82" width="16" height="14" fill="#141414" rx="2"/>
        <rect x="42" y="82" width="16" height="14" fill="#141414" rx="2"/>
        <rect x="50" y="52" width="8" height="12" rx="2"/>
        <g class="smoke" fill="#fff">
          <circle cx="54" cy="46" r="3"  opacity=".18"/>
          <circle cx="58" cy="37" r="3.6" opacity=".14"/>
          <circle cx="62" cy="28" r="4.2" opacity=".10"/>
          <circle cx="66" cy="18" r="5"  opacity=".08"/>
        </g>
      </g>
      <rect class="fade" x="0" y="210" width="1000" height="90"/>
    </svg>
  </div>

  <!-- HEADER -->
  <header class="fixed top-0 left-0 right-0 z-50 text-white">
    <div class="mx-auto max-w-6xl px-4 py-3 grid grid-cols-3 items-center">
      <a href="#etusivu" class="flex items-center gap-3">
        <div class="h-9 w-9 grid place-items-center rounded-xl ring-1 ring-white/40 bg-white/85">
          <span class="-rotate-90 serif text-xl font-black text-stone-900">R</span>
        </div>
        <span class="hidden sm:inline text-sm uppercase tracking-widest font-semibold">RUMAT.STUDIO</span>
      </a>
      <nav class="nav justify-self-center flex items-center gap-6 text-[13px] uppercase tracking-widest">
        <a href="#etusivu" class="font-semibold hover:underline underline-offset-4">Etusivu</a>
        <a href="#tuotteet" class="font-semibold hover:underline underline-offset-4">Tuotteet</a>
        <a href="#tarina" class="font-semibold hover:underline underline-offset-4">Tarina</a>
        <a href="#yhteys" class="font-semibold hover:underline underline-offset-4">Yhteystiedot</a>
      </nav>
      <button id="openCart" class="justify-self-end btn btn-olive text-xs">Ostoskori</button>
    </div>
  </header>

  <!-- HERO -->
  <section id="etusivu" class="h-screen grid place-items-center text-stone-50 px-4">
    <div id="hero-text" class="text-center transition-transform">
      <h1 class="hero-title uppercase text-3xl sm:text-5xl md:text-6xl lg:text-7xl drop-shadow-[0_2px_18px_rgba(0,0,0,0.45)]">
        LIIAN RUMAT OLLAKSEEN TOTTA
      </h1>
      <div class="mt-8 flex justify-center">
        <div class="h-20 w-20 sm:h-24 sm:w-24 grid place-items-center rounded-full bg-white/90 ring-1 ring-white/70 shadow-soft">
          <span class="-rotate-90 serif text-4xl sm:text-5xl font-black text-stone-900">R</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ESITTELY -->
  <section class="py-12 bg-stone-50/90">
    <div class="mx-auto max-w-3xl px-6 text-center">
      <p class="text-xl sm:text-2xl">
        <strong>Luonnosta syntynyt. Reissuissa testattu.</strong>
        Suunnittelemani neuleet ja asusteet kulkevat mukana poluilla ja kaupungissa – jotta sinulla on päälläsi jotain,
        joka istuu, hengittää ja kestää jokaisella askeleella.
      </p>
    </div>
  </section>

  <!-- TUOTTEET -->
  <section id="tuotteet" class="py-14 bg-white">
    <div class="mx-auto max-w-6xl px-4">
      <div class="flex items-center justify-between mb-6">
        <h2 class="serif text-3xl">Tuotteet</h2>
        <div class="text-xs text-stone-500">Hinnat sis. ALV • Palautus 14 vrk</div>
      </div>

      <!-- Laukku -->
      <div class="mb-12">
        <div class="grid md:grid-cols-2 gap-4 md:gap-6">
          <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200">
            <img src="https://images.unsplash.com/photo-1548036328-c9fa89d128fa?auto=format&fit=crop&w=1600&q=80"
                 class="w-full h-full object-cover" alt="Laukku">
          </div>
          <div class="flex flex-col justify-center">
            <h3 class="serif text-2xl">Laukku</h3>
            <p class="mt-2 text-stone-700">
              Täysin kierrätysmateriaaleista valmistettu sling-laukku. Kierrätetty purjekangas/tekstiili,
              hihna käytetystä turvavyöstä, metalliosat uudelleenkäytettyä varastoa. Ulkomitat: 28 × 16 × 7 cm.
            </p>
            <div class="mt-3 text-xl font-semibold">€149,00</div>
            <div class="mt-4">
              <button class="btn btn-dark" onclick="addToCart('Laukku',14900)">Lisää koriin</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Pipo -->
      <div>
        <div class="grid md:grid-cols-2 gap-4 md:gap-6">
          <div class="aspect-[4/5] overflow-hidden rounded-xl ring-1 ring-stone-200">
            <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1600&q=80"
                 class="w-full h-full object-cover" alt="Pipo">
          </div>
          <div class="flex flex-col justify-center">
            <h3 class="serif text-2xl">RUMAT Pipo</h3>
            <p class="mt-2 text-stone-700">
              Käsinneulottu mohair-sekoite. Korkeus n. 22 cm. Päänympärys 54–58 cm (joustava).
            </p>
            <div class="mt-3 text-xl font-semibold">€59,00</div>
            <div class="mt-4">
              <button class="btn btn-dark" onclick="addToCart('Pipo',5900)">Lisää koriin</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- TARINA -->
  <section id="tarina" class="py-14 bg-stone-50/90">
    <div class="mx-auto max-w-3xl px-6">
      <h2 class="serif text-3xl mb-4">Tarina</h2>
      <p>
        Kirjoita tähän yrityksen matkaa: miksi perustit, mitä opit, minne olet menossa.
        Tekstiä voi muuttaa myöhemmin adminin kautta tai päivittämällä tämän tiedoston.
      </p>
    </div>
  </section>

  <!-- BLOGI + SOME -->
  <section class="py-14 bg-white">
    <div class="mx-auto max-w-6xl px-4">
      <h2 class="serif text-3xl mb-6">Blogi & some</h2>
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Blogipostaus -->
        <article class="rounded-xl border border-stone-200 p-5 bg-white">
          <h3 class="text-xl font-semibold">Luonnosta syntynyt</h3>
          <p class="mt-2 text-stone-700">
            Ensimmäiset mallit syntyivät vaelluksilla – tarpeesta saada jotain, joka hengittää ja kestää. Jokainen kappale
            suunnitellaan ja testataan reissuissa ennen kuin ne päätyvät myyntiin.
          </p>
          <p class="mt-2 text-stone-700">
            Materiaalit ovat kierrätettyjä tai vastuullisesti tuotettuja. Halu on yksinkertainen: vähemmän, parempaa.
          </p>
        </article>

        <!-- Some upotukset -->
        <div class="space-y-6">
          <!-- Instagram (oEmbed) -->
          <div class="embed-16x9 rounded-xl overflow-hidden border border-stone-200">
            <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/rumat.studio/" data-instgrm-version="14"></blockquote>
          </div>

          <!-- TikTok (embed) -->
          <div class="embed-16x9 rounded-xl overflow-hidden border border-stone-200">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@rumat.studio/video/7525414518562753814" data-video-id="7525414518562753814" style="max-width: 100%; min-width: 100%; height: 100%;">
              <section> </section>
            </blockquote>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer id="yhteys" class="pt-14 text-[color:var(--brand-ivory)]" style="background:#0B0F0E">
    <div class="mx-auto max-w-6xl px-4 grid sm:grid-cols-3 gap-8">
      <div>
        <div class="uppercase tracking-wide">RUMAT.STUDIO</div>
        <div class="text-sm mt-1 text-white/70">Helsinki — Contemporary textiles, built to last.</div>
      </div>
      <div>
        <h5 class="text-sm text-white/70">Yhteys</h5>
        <ul class="mt-2 space-y-2 text-sm">
          <li><a href="mailto:hello@rumat.fi" class="hover:underline">hello@rumat.fi</a></li>
          <li><a href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer" class="hover:underline">Instagram</a></li>
          <li>Rovaniemi — Helsinki</li>
        </ul>
      </div>
      <div>
        <h5 class="text-sm text-white/70">Toimitus</h5>
        <ul class="mt-2 space-y-2 text-sm">
          <li>Nouto (sovitusti) — 0 €</li>
          <li>Posti — 6,90 € (valitaan korissa)</li>
          <li>Palautus 14 vrk</li>
        </ul>
      </div>
    </div>
    <div class="py-8 text-center text-xs text-white/65">© <span id="year"></span> RUMAT.STUDIO</div>
  </footer>

  <!-- KORI (modal) -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-box">
      <div class="row">
        <h3 class="text-lg font-semibold">Ostoskori</h3>
        <button class="btn" onclick="closeCart()">Sulje</button>
      </div>
      <div id="cartItems" class="mt-3 divide-y divide-stone-200"></div>

      <div class="mt-4">
        <div class="font-semibold mb-2">Toimitus</div>
        <label class="flex items-center gap-2 mt-1">
          <input type="radio" name="ship" value="0" checked onchange="updateTotal()">
          <span>Nouto (sovitusti) — 0 €</span>
        </label>
        <label class="flex items-center gap-2 mt-1">
          <input type="radio" name="ship" value="6.9" onchange="updateTotal()">
          <span>Posti — 6,90 €</span>
        </label>
      </div>

      <div class="row mt-4">
        <div class="text-xl font-bold">Yhteensä: <span id="cartTotal">€0,00</span></div>
        <div class="flex gap-2">
          <button class="btn" onclick="clearCart()">Tyhjennä</button>
          <form id="paypalForm" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
            <input type="hidden" name="cmd" value="_xclick">
            <input type="hidden" name="business" value="YOUR_PAYPAL_BUSINESS_EMAIL">
            <input type="hidden" name="item_name" id="pp_item" value="RUMAT.STUDIO tilaus">
            <input type="hidden" name="amount" id="pp_amount" value="0.00">
            <input type="hidden" name="currency_code" value="EUR">
            <input type="submit" class="btn btn-olive" value="Maksamaan">
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Skriptit -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Hero-tekstin kevyt liike (tausta pysyy paikoillaan)
    const heroText = document.getElementById('hero-text');
    let lastY=-1;
    const onScroll = () => {
      const y = window.scrollY||0; if(y===lastY) return; lastY=y;
      const vh = innerHeight||1;
      const t = -16 * Math.min(1, y / (vh*0.9));
      heroText.style.transform = `translateY(${t}vh)`;
    };
    addEventListener('scroll', onScroll, {passive:true}); onScroll();

    // ------- IG + TikTok embed loader -------
    (function(){
      const ig = document.createElement('script');
      ig.src = "https://www.instagram.com/embed.js"; ig.async = true;
      document.body.appendChild(ig);
      const tt = document.createElement('script');
      tt.src = "https://www.tiktok.com/embed.js"; tt.async = true;
      document.body.appendChild(tt);
    })();

    // ------- Yksinkertainen kori -------
    const cart = [];
    function addToCart(name, cents){
      const found = cart.find(i=>i.name===name);
      if(found) found.qty++; else cart.push({name, cents, qty:1});
      openCart();
      renderCart();
    }
    function removeItem(idx){
      cart.splice(idx,1); renderCart();
    }
    function clearCart(){
      cart.length=0; renderCart();
    }
    function fmtEUR(c){ return new Intl.NumberFormat('fi-FI',{style:'currency',currency:'EUR'}).format(c/100); }
    function renderCart(){
      const el = document.getElementById('cartItems');
      if(!cart.length){ el.innerHTML = '<div class="text-stone-500 py-6">Kori on tyhjä.</div>'; }
      else{
        el.innerHTML = cart.map((it,idx)=>`
          <div class="py-3 flex items-center justify-between">
            <div>
              <div class="font-medium">${it.name}</div>
              <div class="text-sm text-stone-500">${fmtEUR(it.cents)} ×
                <button class="underline" onclick="chgQty(${idx},-1)">-</button>
                ${it.qty}
                <button class="underline" onclick="chgQty(${idx},1)">+</button>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <div class="font-semibold">${fmtEUR(it.cents*it.qty)}</div>
              <button class="text-stone-500 underline" onclick="removeItem(${idx})">poista</button>
            </div>
          </div>`).join('');
      }
      updateTotal();
    }
    function chgQty(idx,delta){
      const it = cart[idx]; it.qty = Math.max(1, it.qty+delta);
      renderCart();
    }
    function updateTotal(){
      const sub = cart.reduce((s,i)=>s+i.cents*i.qty,0);
      const ship = parseFloat(document.querySelector('input[name="ship"]:checked').value||"0");
      const totalCents = Math.round(sub + ship*100);
      document.getElementById('cartTotal').textContent = fmtEUR(totalCents);
      document.getElementById('pp_amount').value = (totalCents/100).toFixed(2);
      const lines = cart.map(i=>`${i.name} × ${i.qty}`).join(', ');
      document.getElementById('pp_item').value = `RUMAT.STUDIO tilaus – ${lines} + toimitus`;
    }
    function openCart(){ document.getElementById('cartModal').style.display='flex'; }
    function closeCart(){ document.getElementById('cartModal').style.display='none'; }
    document.getElementById('openCart').addEventListener('click', openCart);

    // ------- WebGL Revontulet – kevyt liike, FIXED tausta -------
    (function(){
      const SETTINGS = {
        PAL_COL1:[0.02,0.70,0.95], // sinertävä
        PAL_COL2:[0.00,1.00,0.60], // vihreä
        BRIGHTNESS:1.00,
        CURTAIN_Y:0.58,
        HEIGHT:0.55,
        SPEED:0.18,          // pieni, jatkuva liike
        STRIPE_STRENGTH:0.22,
        STAR_DENS:0.0001
      };
      const canvas = document.getElementById('aurora');
      const gl = canvas.getContext('webgl',{alpha:false, antialias:true});
      if(!gl){ console.warn('WebGL ei käytettävissä'); return; }

      const vs = `
        attribute vec2 p; varying vec2 v;
        void main(){ v=p; gl_Position=vec4(p,0.,1.); }
      `;
      const fs = `
        precision highp float; varying vec2 v;
        uniform vec2 r; uniform float t;
        vec3 mix3(vec3 a, vec3 b, float x){ return a*(1.0-x)+b*x; }
        float n(vec2 p){ return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453); }
        float noise(vec2 p){
          vec2 i=floor(p), f=fract(p);
          float a=n(i), b=n(i+vec2(1,0)), c=n(i+vec2(0,1)), d=n(i+vec2(1,1));
          vec2 u=f*f*(3.0-2.0*f);
          return mix(a,b,u.x)+ (c-a)*u.y*(1.0-u.x)+ (d-b)*u.x*u.y;
        }
        void main(){
          vec2 uv = (v+1.0)*0.5;
          uv.x *= r.x/r.y;

          // tähtipöly
          float stars=0.0;
          if(${SETTINGS.STAR_DENS} > 0.0){
            float s = noise(uv*vec2(900.0,800.0));
            stars = step(1.0-${SETTINGS.STAR_DENS}, s)*0.6;
          }

          float Y = ${SETTINGS.CURTAIN_Y};
          float H = ${SETTINGS.HEIGHT};
          float a = clamp( (uv.y - Y)/H, 0.0, 1.0 );

          float tt = t*${SETTINGS.SPEED};
          float stripe = sin(uv.x*12.0 + tt*1.6)*${SETTINGS.STRIPE_STRENGTH};

          float band1 = smoothstep(0.0,1.0,a) * (0.4+0.6*noise(uv*4.0 + tt));
          float band2 = smoothstep(0.0,1.0,a) * (0.3+0.7*noise(uv*6.0 - tt*0.7));
          float band = clamp(band1+band2+stripe,0.0,1.0);

          vec3 c1 = vec3(${SETTINGS.PAL_COL1[0]},${SETTINGS.PAL_COL1[1]},${SETTINGS.PAL_COL1[2]});
          vec3 c2 = vec3(${SETTINGS.PAL_COL2[0]},${SETTINGS.PAL_COL2[1]},${SETTINGS.PAL_COL2[2]});
          vec3 col = mix3(c1,c2, band);
          col *= ${SETTINGS.BRIGHTNESS};

          // tumma yö taustalle
          col = mix(vec3(0.04,0.09,0.14), col, a);

          // lisää tähtipölyä vain yläosaan kevyesti
          col += vec3(stars)*0.25*(1.0-a);

          gl_FragColor = vec4(col,1.0);
        }
      `;
      function compile(type,src){
        const s = gl.createShader(type); gl.shaderSource(s,src); gl.compileShader(s);
        if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(s);
        return s;
      }
      const prog = gl.createProgram();
      gl.attachShader(prog, compile(gl.VERTEX_SHADER,vs));
      gl.attachShader(prog, compile(gl.FRAGMENT_SHADER,fs));
      gl.linkProgram(prog);
      if(!gl.getProgramParameter(prog, gl.LINK_STATUS)) throw gl.getProgramInfoLog(prog);
      gl.useProgram(prog);

      const buf = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buf);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        -1,-1,  1,-1, -1,1,  -1,1, 1,-1, 1,1
      ]), gl.STATIC_DRAW);
      const loc = gl.getAttribLocation(prog,'p');
      gl.enableVertexAttribArray(loc);
      gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);

      const ur = gl.getUniformLocation(prog,'r');
      const ut = gl.getUniformLocation(prog,'t');

      function resize(){
        const dpr = Math.min(devicePixelRatio||1, 2); // pehmentää rakeisuutta
        const w = Math.floor(innerWidth*dpr), h = Math.floor(innerHeight*dpr);
        if(canvas.width!==w||canvas.height!==h){
          canvas.width=w; canvas.height=h; gl.viewport(0,0,w,h);
        }
        gl.uniform2f(ur, canvas.width, canvas.height);
      }
      addEventListener('resize', resize); resize();

      let start = performance.now();
      (function loop(now){
        requestAnimationFrame(loop);
        const t = (now-start)/1000;
        gl.uniform1f(ut, t);
        gl.drawArrays(gl.TRIANGLES,0,6);
      })(start);
    })();
  </script>
</body>
</html>
