<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>RUMAT STUDIO</title>
  <meta name="description" content="Luonnosta syntynyt. Reissuissa testattu. Neuleet ja asusteet poluille ja kaupunkiin – ajattomat, hengittävät ja kestävät."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --ink:#202020;           /* teksti */
      --white:#F6F6F4;         /* taustat ja yläpalkki */
      --olive:#A1A266;         /* alapalkki */
      --navy:#345563;          /* otsikot */
      --blue:#789FAB;          /* varalla */
      --light:#DEEEEE;         /* footer-logo yms */
      --header-h:72px;
      --radius:18px;
    }

    html,body{height:100%}
    body{margin:0;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--white)}
    img{max-width:100%;display:block}

    /* ====== HEADER ====== */
    header{position:fixed;inset:0 auto auto 0;right:0;z-index:50;background:var(--white);border-bottom:1px solid #e6e6e6}
    .hdr-wrap{max-width:72rem;margin:0 auto;padding:12px 16px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;min-width:0}
    .brand img{height:36px;width:36px;object-fit:contain}
    .brand-name{white-space:nowrap;font-weight:800;letter-spacing:.08em}
    .brand-name b{font-weight:900}
    nav.center{justify-self:center;display:flex;gap:24px;font-size:.86rem;letter-spacing:.18em;text-transform:uppercase;font-weight:800}
    nav.center a{white-space:nowrap}
    /* Right icons pinned to far right edge */
    #rightIcons{position:absolute;right:12px;top:50%;transform:translateY(-50%);display:flex;gap:10px}
    .icon-btn,.pill-btn{
      display:inline-grid;place-items:center;border-radius:9999px;border:1px solid #dadada;background:#fff;height:40px
    }
    .icon-btn{width:40px}
    .pill-btn{padding:0 14px;font-weight:800;letter-spacing:.12em}
    .hidden-abs{position:absolute!important;left:-9999px!important;visibility:hidden!important}

    /* measure helper */
    .nav-measure{position:absolute!important;visibility:hidden!important;display:flex!important;white-space:nowrap!important}

    /* ====== HERO VIDEO ====== */
    .hero{position:relative;height:100vh;isolation:isolate}
    .hero video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .hero .center-logo{position:absolute;inset:0;margin:auto;display:grid;place-items:center;pointer-events:none}
    .hero .center-logo img{width:min(28vmin,128px);height:min(28vmin,128px);object-fit:contain;opacity:.95}

    /* ====== SECTIONS ====== */
    .band{max-width:72rem;margin:0 auto;padding:48px 16px}
    .heading{color:var(--navy);font-weight:900;letter-spacing:.18em;text-transform:uppercase}

    /* Intro with edge images */
    .intro-wrap{margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);padding:28px 16px}
    .intro-grid{max-width:72rem;margin:0 auto;display:grid;grid-template-columns:1fr minmax(280px,680px) 1fr;gap:16px;align-items:center}
    .intro-img{aspect-ratio:3/4;object-fit:cover;border-radius:var(--radius)}
    .intro-text{background:var(--white);border-radius:var(--radius);padding:18px 22px}
    .intro-text p{line-height:1.65}

    @media (max-width:960px){
      .intro-grid{grid-template-columns:1fr}
      .intro-img{display:none}
    }

    /* ====== KAAVAT GRID ====== */
    #kaaviot .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media (max-width:1024px){ #kaaviot .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:760px){  #kaaviot .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:480px){  #kaaviot .grid{grid-template-columns:1fr} }

    .tile{position:relative;border-radius:16px;overflow:hidden;background:#eee}
    .tile .pic{width:100%;aspect-ratio:1/1;object-fit:cover}
    .tile .label{position:absolute;left:0;right:0;bottom:0;padding:8px 10px;background:rgba(246,246,244,.92);font-weight:800;letter-spacing:.12em;text-transform:uppercase}
    .tile button.expand-toggle{position:absolute;inset:0;background:transparent;border:none;cursor:pointer}
    .tile.active .expand-toggle{background:rgba(0,0,0,.1);color:#fff;font-weight:800}
    .tile.active .expand-toggle::after{content:"PIENENNÄ";position:absolute;inset:0;display:grid;place-items:center;letter-spacing:.18em}

    /* Inline expander row */
    #expander{display:none;margin-top:16px;border-radius:16px;background:#fff;border:1px solid #e6e6e6;overflow:hidden}
    #expander.open{display:block}
    .exp-wrap{display:grid;grid-template-columns:1.3fr 1fr;gap:18px;padding:18px}
    .exp-left{position:relative}
    .exp-left img{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:12px}
    .exp-nav{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;pointer-events:none}
    .exp-btn{pointer-events:auto;border:none;background:rgba(255,255,255,.9);width:40px;height:40px;border-radius:9999px;font-weight:900}
    .exp-right h3{font-weight:900;letter-spacing:.18em;text-transform:uppercase;color:var(--navy);margin-bottom:.35rem}
    .price{font-weight:800;margin:.25rem 0 .5rem}
    .chip{display:inline-block;padding:.25rem .55rem;border:1px solid #d9d9d9;border-radius:9999px;margin-right:.25rem;font-size:.85rem}
    .buy-btn{margin-top:10px;border:1px solid var(--ink);padding:.55rem .9rem;border-radius:9999px;font-weight:800;letter-spacing:.12em}

    @media (max-width:920px){
      .exp-wrap{grid-template-columns:1fr;gap:12px}
      .exp-left img{aspect-ratio:3/2}
    }

    /* ===== Cart / Drawers (basic) ===== */
    .drawer{position:fixed;inset:0;z-index:60;display:none}
    .drawer.open{display:block}
    .drawer .panel{position:absolute;top:0;bottom:0;width:min(420px,90vw);background:#fff;box-shadow:0 0 30px rgba(0,0,0,.25)}
    #menuDrawer .panel{left:0}
    #cartDrawer .panel{right:0}
    .shadow-soft{box-shadow:0 8px 20px rgba(0,0,0,.12)}

    /* ===== Footer (image-style) ===== */
    .footer-bar{ background: var(--olive); color: var(--ink); }
    .footer-grid{
      max-width: 72rem; margin: 0 auto; padding: 24px 16px;
      display:grid;
      grid-template-columns: 1fr 1fr auto;
      grid-template-areas: "left center logo";
      gap: 24px 32px; align-items:start;
    }
    .footer-col h6{
      margin:0 0 .25rem; font-size:.82rem; font-weight:900; text-transform:uppercase;
      letter-spacing:.12em; color:var(--ink);
    }
    .footer-link, .footer-handle{ color:var(--ink); opacity:.85; text-decoration:none; }
    .footer-link:hover, .footer-handle:hover{ text-decoration:underline; }
    .footer-left   { grid-area:left;  display:flex; flex-direction:column; gap:1rem; }
    .footer-center { grid-area:center; display:flex; flex-direction:column; gap:.45rem; }
    .footer-logo   { grid-area:logo;  display:flex; align-items:flex-start; justify-content:flex-end; }
    .footer-logo img{ height:70px; width:auto; object-fit:contain; filter:none }
    .footer-ytunnus{ font-weight:900; }
    .footer-copy{ text-align:center; font-size:.8rem; opacity:.85; padding:10px 0 18px; }
    @media (max-width:760px){
      .footer-grid{
        grid-template-columns: 1fr auto;
        grid-template-areas:
          "left  logo"
          "center logo";
        gap:16px 20px;
      }
      .footer-logo img{ height:64px; }
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="hdr-wrap">
      <!-- Brand (left) -->
      <a href="#etusivu" class="brand" id="brand">
        <img src="assets/logo.svg" alt="RUMAT STUDIO">
        <div class="brand-name"><b>RUMAT</b> STUDIO</div>
      </a>

      <!-- Center nav (auto hide if not enough room) -->
      <nav id="mainNav" class="center">
        <a href="#mika">Mikä on RUMAT?</a>
        <a href="#kaaviot">Kaavat</a>
        <a href="#suunnittelija">Suunnittelija</a>
        <a href="#yhteys">Yhteystiedot</a>
      </nav>

      <!-- Right block: toggling cart text/icon + menu icon -->
      <div id="rightIcons">
        <button id="menuBtn" class="icon-btn hidden-abs" aria-label="Valikko">
          <span aria-hidden="true" style="font-size:20px;line-height:1">☰</span>
        </button>
        <button id="cartBtnText" class="pill-btn">Ostoskori (<span id="cartCount">0</span>)</button>
        <button id="cartBtnIcon" class="icon-btn hidden-abs" aria-label="Ostoskori">
          <svg aria-hidden="true" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="20" r="1.8"></circle>
            <circle cx="17" cy="20" r="1.8"></circle>
            <path d="M3 4h2l2.2 10.2a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6L21 8H7.1"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main style="padding-top:var(--header-h)">
    <!-- ===== HERO (video only + centered logo) ===== -->
    <section id="etusivu" class="hero">
      <video id="heroVideo" playsinline autoplay muted loop poster="assets/aurora-poster.jpg">
        <source src="assets/aurora.mp4" type="video/mp4">
        <source src="assets/aurora.webm" type="video/webm">
      </video>
      <div class="center-logo">
        <img src="assets/logo.svg" alt="RUMAT STUDIO logo">
      </div>
    </section>

    <!-- ===== INTRO ===== -->
    <section id="mika" class="intro-wrap">
      <div class="intro-grid">
        <img class="intro-img" src="https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=1200&auto=format&fit=crop" alt="">
        <div class="intro-text">
          <h2 class="heading text-2xl mb-3">LIIAN RUMAT OL­LAKSEEN TOTTA</h2>
          <p><strong>RUMAT STUDIO</strong> syntyi lapsuuden haaveesta ja vuosien aikana kypsyneestä intohimosta vaatesuunnitteluun. Vuonna 2023 visio alkoi muovautumaan nykyiseen muotoonsa: ajattomia ja kestäviä vaatteita, jotka syntyvät harkitusta rakkaudesta ja intohimosta luovaan tekemiseen.</p>
          <p class="mt-3"><strong>RUMAT STUDIO</strong> pohjautuu vahvaan arvopohjaan. Se ei ole pelkkä tuotemerkki, vaan se rohkaisee pohtimaan omaa kulutuskäyttäytymistä ja inspiroi tekemään itse tai ainakin arvostamaan vaatteiden alkuperää ja tekijöitä niiden takana.</p>
          <p class="mt-3">Taustalla on halu luoda ajattomia, kestäviä ja harkiten suunniteltuja vaatteita vastalauseena kertakäyttöiselle pikamuodille. Jokainen vaate suunnitellaan kestämään sekä käytössä että ajassa. Suunnittelussa otetaan huomioon materiaalien laatu, vaatteen käyttötarkoitus ja visuaalinen ilme, mutta myös tuotannon ekologinen ja eettinen kestävyys. Käsityönä valmistetut vaatteet vaativat aikaa ja siten nostavat vaatteen arvoa niin konkreettisesti kuin tunnearvossakin.</p>
          <p class="mt-3">Tulevaisuuden suunnitelmissa on oman studiollisen avaaminen pääkaupunkiseudulle. Tila toimisi kohtaamispaikkana, jossa voi sovittaa mallikappaleita, osallistua työpajoihin ja verkostoitua muiden kestävästä arvosta kiinnostuneiden muotoilijoiden, ompelijoiden ja suunnittelijoiden kanssa.</p>
          <p class="mt-3">Jokainen ”<strong>liian RUMAT ollakseen totta</strong>” -tuote on suunniteltu huolella merkityksellisyydestä käyttömukavuuteen asti. Tavoitteena ei ole täydellisyys, vaan rohkeus ja kehitys.</p>
        </div>
        <img class="intro-img" src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop" alt="">
      </div>
    </section>

    <!-- ===== KAAVIOT ===== -->
    <section id="kaaviot" class="band">
      <h2 class="heading text-2xl mb-4">KAAVAT</h2>
      <div id="patternGrid" class="grid"></div>
      <div id="expander"></div>
    </section>

    <!-- ===== SUUNNITTELIJA ===== -->
    <section id="suunnittelija" class="band">
      <h2 class="heading text-2xl mb-5">SUUNNITTELIJA</h2>
      <div class="grid grid-cols-1 md:grid-cols-[320px_minmax(0,1fr)] gap-5 items-start">
        <img class="rounded-[18px] w-full h-auto object-cover"
             src="https://images.unsplash.com/photo-1520974735194-83e7d86ad2d0?q=80&w=1200&auto=format&fit=crop" alt="">
        <div>
          <p>Aaltonen on itsevarma neuloja, joka ei rajoita luovuuttaan vain yhteen tekemisen tapaan. Neulomisen rinnalla myös asusteiden ompelu on tärkeä osa ilmaisua – ja ennen kaikkea intohimo. Lapsuuden kiinnostus vaatteiden suunnitteluun johti muodin ja tekstiilisuunnittelun opintoihin vuonna 2021.</p>
          <p class="mt-3">Pian Aaltonen valmistuu taiteen maisteriksi, mukanaan vankka osaaminen ja omat suosikkitekniikat, joita hän on hionut opintojen aikana. Neulomisen ja asusteiden lisäksi Aaltonen on syventynyt erityisesti vaatteiden kierrätykseen, korjaamiseen liittyviin asenteisiin sekä kriittiseen tarkasteluun siitä, miten kuluttamista ohjataan – ja millaisia seurauksia sillä on ympäristölle.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer id="yhteys" class="footer-bar">
    <div class="footer-grid">
      <div class="footer-left">
        <div class="footer-col">
          <h6>Instagram</h6>
          <a class="footer-handle" href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a>
        </div>
        <div class="footer-col">
          <h6>TikTok</h6>
          <a class="footer-handle" href="https://www.tiktok.com/@rumat.studio" target="_blank" rel="noreferrer">rumat.studio</a>
        </div>
      </div>
      <div class="footer-center">
        <div class="footer-col">
          <h6>Ota yhteyttä</h6>
          <a class="footer-link" href="mailto:aaltonen96@outlook.com">aaltonen96@outlook.com</a>
        </div>
        <div class="footer-ytunnus">Y-3436822-5</div>
      </div>
      <div class="footer-logo">
        <img src="assets/logo.svg" alt="RUMAT STUDIO">
      </div>
    </div>
    <div class="footer-copy">© <span id="year"></span> RUMAT STUDIO</div>
  </footer>

  <!-- ===== DRAWERS ===== -->
  <!-- Menu -->
  <div id="menuDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" data-close></div>
    <div class="panel p-6 flex flex-col gap-3">
      <div class="flex items-center justify-between mb-2">
        <div class="heading text-lg">VALIKKO</div>
        <button class="text-stone-600" data-close>✕</button>
      </div>
      <a class="py-2 border-b" href="#etusivu" data-close>Etusivu</a>
      <a class="py-2 border-b" href="#mika" data-close>Mikä on RUMAT?</a>
      <a class="py-2 border-b" href="#kaaviot" data-close>Kaavat</a>
      <a class="py-2 border-b" href="#suunnittelija" data-close>Suunnittelija</a>
      <a class="py-2" href="#yhteys" data-close>Yhteystiedot</a>
    </div>
  </div>

  <!-- Cart -->
  <div id="cartDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" data-close></div>
    <div class="panel p-6 flex flex-col gap-4">
      <div class="flex items-center justify-between">
        <div class="heading text-lg">OSTOSKORI</div>
        <button class="text-stone-600" data-close>✕</button>
      </div>
      <div id="cartItems" class="flex-1 overflow-auto divide-y"></div>
      <div class="text-sm grid grid-cols-2 gap-y-1">
        <div class="text-stone-600">Välisumma</div><div class="text-right" id="subTotal">€0,00</div>
        <div class="text-stone-600">Toimitus</div><div class="text-right" id="shipTotal">€0,00</div>
        <div class="font-semibold">Yhteensä</div><div class="text-right font-semibold" id="grandTotal">€0,00</div>
      </div>
      <button id="checkout" class="shadow-soft buy-btn">Maksa PayPalilla</button>
    </div>
  </div>

  <script>
  const $ = s => document.querySelector(s);
  const fmtEUR = x => new Intl.NumberFormat('fi-FI',{style:'currency',currency:'EUR'}).format(x);

  /* ===== YEAR ===== */
  document.getElementById('year').textContent = new Date().getFullYear();

  /* ===== RESPONSIVE HEADER BEHAVIOR =====
     Show center nav when it fits; otherwise show menu icon.
     Cart: text button when nav shown, icon when nav hidden. */
  (function(){
    const wrap = document.querySelector('.hdr-wrap');
    const nav  = document.getElementById('mainNav');
    const brand= document.getElementById('brand');
    const menu = document.getElementById('menuBtn');
    const cartText = document.getElementById('cartBtnText');
    const cartIcon = document.getElementById('cartBtnIcon');

    function measureNav(){
      nav.classList.add('nav-measure');
      const w = Math.ceil(nav.scrollWidth);
      nav.classList.remove('nav-measure');
      return w;
    }
    function recompute(){
      // Temporarily hide menu to test fit
      const oldHidden = menu.classList.contains('hidden-abs');
      menu.classList.add('hidden-abs');
      const available = wrap.clientWidth - brand.getBoundingClientRect().width - document.getElementById('rightIcons').offsetWidth - 24;
      const fits = measureNav() <= available;
      if (fits){
        nav.classList.remove('hidden-abs');
        menu.classList.add('hidden-abs');
        cartText.classList.remove('hidden-abs');
        cartIcon.classList.add('hidden-abs');
      } else {
        nav.classList.add('hidden-abs');
        menu.classList.remove('hidden-abs');
        cartText.classList.add('hidden-abs');
        cartIcon.classList.remove('hidden-abs');
      }
      if (!oldHidden) menu.classList.remove('hidden-abs');
      document.documentElement.style.setProperty('--header-h', Math.round(document.querySelector('header').getBoundingClientRect().height) + 'px');
    }
    window.addEventListener('resize', ()=>{ clearTimeout(window.__navt); window.__navt=setTimeout(recompute,120); }, {passive:true});
    if ('fonts' in document) document.fonts.ready.then(recompute);
    recompute();

    // open drawers
    menu.addEventListener('click', ()=> openDrawer('#menuDrawer'));
    document.getElementById('cartBtnIcon').addEventListener('click', ()=>openDrawer('#cartDrawer'));
    document.getElementById('cartBtnText').addEventListener('click', ()=>openDrawer('#cartDrawer'));
  })();

  /* ===== DRAWER HELPERS ===== */
  function openDrawer(sel){ const d=$(sel); if(!d) return; d.classList.add('open'); }
  function closeDrawer(el){ el.classList.remove('open'); }
  document.querySelectorAll('.drawer [data-close]').forEach(el=>el.addEventListener('click',e=>closeDrawer(e.currentTarget.closest('.drawer'))));
  document.querySelectorAll('.drawer').forEach(d=>d.addEventListener('click',e=>{ if(e.target===d) closeDrawer(d); }));
  document.addEventListener('keydown',e=>{ if(e.key==='Escape'){ document.querySelectorAll('.drawer.open').forEach(closeDrawer); } });

  /* ===== SIMPLE CART ===== */
  let CART = {};
  function updateBadge(){ document.getElementById('cartCount').textContent = Object.values(CART).reduce((a,b)=>a+b,0); }
  function addToCart(id){ CART[id]=(CART[id]||0)+1; updateBadge(); openDrawer('#cartDrawer'); renderCart(); }
  function renderCart(){
    const root = document.getElementById('cartItems'); root.innerHTML='';
    let sub=0;
    Object.keys(CART).forEach(id=>{
      const p = PATTERNS.find(x=>x.id===id); if(!p) return;
      const price = p.price || 0; sub += price;
      const row = document.createElement('div');
      row.className='py-3 flex items-center justify-between gap-3';
      row.innerHTML = `<div><div class="font-semibold">${p.name}</div><div class="text-sm opacity-70">${fmtEUR(price)}</div></div>
                       <button class="px-2 rounded border" data-rm="${id}">Poista</button>`;
      root.appendChild(row);
    });
    document.getElementById('subTotal').textContent = fmtEUR(sub);
    document.getElementById('shipTotal').textContent = fmtEUR(0);
    document.getElementById('grandTotal').textContent = fmtEUR(sub);
    root.querySelectorAll('[data-rm]').forEach(b=>b.addEventListener('click',()=>{ delete CART[b.dataset.rm]; updateBadge(); renderCart(); }));
  }
  document.getElementById('checkout').addEventListener('click', ()=>alert('Demo: lisää maksutapa myöhemmin.'));

  /* ===== KAAVIOT DATA ===== */
  const PATTERNS = [
    {id:'laukku', name:'Laukku', price:9.90, sizes:'One size', images:[
      'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1520975922321-6ca0a0a5a0d3?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Kierrätysmateriaaleille optimoitu laukku.'},
    {id:'usva', name:'Usva paita', price:7.90, sizes:'S–XL', images:[
      'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Rento paita viileisiin päiviin.'},
    {id:'panta', name:'Neule panta', price:4.90, sizes:'One size', images:[
      'https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1511389026070-a14ae610a1be?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Helppo ja nopea asuste.'},
    {id:'sukka', name:'Vaellussukka', price:5.90, sizes:'36–46', images:[
      'https://images.unsplash.com/photo-1520974735194-83e7d86ad2d0?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1520975922321-6ca0a0a5a0d3?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Vahvistettu kanta ja kärki.'},
    {id:'hame', name:'Villahame', price:8.90, sizes:'XS–L', images:[
      'https://images.unsplash.com/photo-1487412912498-0447578fcca8?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1551163943-3f6a855d1152?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'A-linjainen, ajaton malli.'},
    {id:'pipo', name:'Pipo', price:3.90, sizes:'One size', images:[
      'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Mohair-sekoite, kevyt ja lämmin.'},
    {id:'kauluri', name:'Kauluri', price:4.90, sizes:'One size', images:[
      'https://images.unsplash.com/photo-1520974735194-83e7d86ad2d0?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Tuulisiin päiviin.'},
    {id:'villapaita', name:'Villapaita', price:11.90, sizes:'S–XL', images:[
      'https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop'
    ], blurb:'Hengittävä arkeen ja metsään.'},
  ];

  /* ===== RENDER KAAVIOT ===== */
  const grid = document.getElementById('patternGrid');
  const expander = document.getElementById('expander');
  let openId = null, slideIndex = 0;

  function renderGrid(){
    grid.innerHTML = '';
    PATTERNS.forEach(p=>{
      const tile = document.createElement('div');
      tile.className='tile' + (openId===p.id ? ' active':'');
      tile.innerHTML = `
        <img class="pic" src="${p.images[0]}" alt="">
        <div class="label">${p.name}</div>
        <button class="expand-toggle" aria-label="${openId===p.id?'Pienennä':'Laajenna'}"></button>
      `;
      tile.querySelector('button').addEventListener('click',()=>{
        if(openId===p.id){ closeExpander(); return; }
        openExpander(p);
      });
      grid.appendChild(tile);
    });
  }

  function openExpander(p){
    openId = p.id; slideIndex = 0;
    // mark active
    renderGrid();
    // content
    expander.className='open';
    expander.innerHTML = `
      <div class="exp-wrap">
        <div class="exp-left">
          <img id="expImg" src="${p.images[slideIndex]}" alt="">
          <div class="exp-nav">
            <button class="exp-btn" id="prev">‹</button>
            <button class="exp-btn" id="next">›</button>
          </div>
        </div>
        <div class="exp-right">
          <h3>${p.name}</h3>
          <div class="price">${fmtEUR(p.price || 0)}</div>
          <div class="mb-2">${p.blurb || ''}</div>
          <div class="mb-2"><span class="chip">${p.sizes || ''}</span></div>
          <button class="buy-btn" id="buyBtn">Lisää ostoskoriin</button>
        </div>
      </div>
    `;
    const img = document.getElementById('expImg');
    document.getElementById('prev').addEventListener('click',()=>{
      slideIndex = (slideIndex - 1 + p.images.length) % p.images.length;
      img.src = p.images[slideIndex];
    });
    document.getElementById('next').addEventListener('click',()=>{
      slideIndex = (slideIndex + 1) % p.images.length;
      img.src = p.images[slideIndex];
    });
    document.getElementById('buyBtn').addEventListener('click',()=>addToCart(p.id));
    // Scroll expander into view (under grid)
    expander.scrollIntoView({behavior:'smooth',block:'start'});
  }
  function closeExpander(){
    openId = null;
    expander.className=''; expander.innerHTML='';
    renderGrid();
  }

  renderGrid();
  updateBadge();
  </script>
</body>
</html>
