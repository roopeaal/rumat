<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RUMAT STUDIO</title>
  <meta name="description" content="Luonnosta syntynyt. Reissuissa testattu. Neuleet ja asusteet poluille ja kaupunkiin – istuvat, hengittävät ja kestävät."/>

  <!-- Fontit + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;600;700&family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- OG -->
  <meta property="og:title" content="RUMAT STUDIO – Luonnosta syntynyt. Reissuissa testattu.">
  <meta property="og:description" content="Neuleet ja asusteet poluille ja kaupunkiin – istuvat, hengittävät ja kestävät.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://placehold.co/1200x630?text=RUMAT%20STUDIO">
  <meta name="twitter:card" content="summary_large_image">

  <style>
    :root{
      --ink:#202020;         /* musta (tekstit) */
      --olive:#A1A266;       /* FOOTER-tausta */
      --deep-blue:#345563;   /* otsikot */
      --blue:#789FAB;        /* varalla */
      --light-blue:#DEEEEE;  /* footer-logo / vaalea sininen */
      --ivory:#F6F6F4;       /* taustat & yläpalkki */

      --header-h:56px;
      --section-gap: clamp(4px, 0.7vw, 8px);
      --band-radius: 16px;
    }

    html{ scroll-padding-top: var(--header-h); }
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:var(--ink);background:var(--ivory)}

    /* Otsikoiden oletusväri tummansininen… */
    h1,h2,h3{ color: var(--deep-blue); }
    /* …mutta hero-otsikko pidetään VALKOISENA videon päällä */
    .hero h1{ color: var(--ivory) !important; }

    .serif{font-family:"Libre Baskerville",serif}
    .shadow-soft{box-shadow:0 6px 20px rgba(0,0,0,.12)}
    .btn{border-radius:9999px;padding:.6rem 1rem;border:1px solid rgba(0,0,0,.15);transition:transform .06s, box-shadow .12s}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.12)}
    .btn-dark{background:var(--ink);color:#fff;border-color:var(--ink)}
    .chip{font-size:.78rem;padding:.25rem .55rem;border-radius:9999px;border:1px solid rgba(0,0,0,.15);background:#fff}

    /* Taustavideo */
    .bg-fixed{
      position:fixed; inset:0; width:100%; height:100%;
      object-fit:cover; z-index:0; pointer-events:none; display:block;
      background:#000;
    }
    .site-content{ position:relative; z-index:2; background:transparent; }

    /* Hero */
    .hero{ position:relative; height:100vh; height:100svh; isolation:isolate; overflow:hidden; }
    #hero-text{ will-change:transform; transform:translateZ(0); transition:none !important; }
    @media (prefers-reduced-motion: reduce){ #hero-text{ transform:none !important; } }

    /* Drawer & Modal */
    .drawer{position:fixed;inset:0;z-index:60;display:none}
    .drawer.open{display:block}
    #menuDrawer .panel{position:absolute;top:0;left:0;right:auto;width:min(420px,90vw);height:100%;background:#fff;box-shadow:10px 0 30px rgba(0,0,0,.2)}
    #cartDrawer .panel{position:absolute;top:0;right:0;left:auto;width:min(420px,90vw);height:100%;background:#fff;box-shadow:-10px 0 30px rgba(0,0,0,.2)}
    .modal{position:fixed;inset:0;z-index:70;display:none}
    .modal.open{display:grid;place-items:center}

    /* Nav mittaus + togglaus */
    .nav-measure{ position:absolute !important; visibility:hidden !important; display:flex !important; white-space:nowrap !important; }
    .nav-hidden{ display:none !important; }

    /* HEADER GRID: vasen brand, keskellä nav, oikealla ikonit/tekstit */
    #hdrRow{ grid-template-columns: auto 1fr auto; }
    #brandBlock{ min-width:0; justify-self:start; }
    #brandText{
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width:min(42vw, 460px);
      color:var(--ink);
    }

    #mainNav{
      justify-self:center;
      display:flex; gap:1.5rem; white-space:nowrap;
      font-size:13px; text-transform:uppercase; letter-spacing:.2em;
      color:var(--ink);
    }
    #mainNav a{ color:var(--ink); }

    #rightBlock{ justify-self:end; display:flex; align-items:center; gap:.5rem; white-space:nowrap; }

    /* Ikonipainikkeet – vaalea header */
    .icon-btn{
      position:relative; width:38px; height:38px; display:grid; place-items:center;
      border-radius:9999px; background:rgba(0,0,0,0.06);
      border:1px solid rgba(0,0,0,0.16); color:var(--ink); transition:background .15s ease;
    }
    .icon-btn:hover{ background:rgba(0,0,0,0.10); }

    .badge{
      position:absolute; top:-4px; right:-4px; min-width:18px; height:18px; padding:0 4px;
      display:grid; place-items:center; border-radius:9999px; background:var(--ink); color:#fff;
      font-size:11px; line-height:1; font-weight:700; border:1px solid rgba(0,0,0,.15);
    }

    .cart-text-btn{
      border:1px solid rgba(0,0,0,.16);
      padding:.45rem .8rem; border-radius:9999px; color:var(--ink);
      background:rgba(0,0,0,.04);
    }
    .cart-text-btn:hover{ background:rgba(0,0,0,.08); }

    /* Rako-osiot */
    .aurora-gap{ height: var(--section-gap); pointer-events: none; background: transparent; }

    /* Pyöristetyt palkit */
    .full-bleed{ margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }
    .band{ background: var(--ivory); border-radius: var(--band-radius); overflow: hidden; }
    .band--mist{ background: var(--light-blue); }
    .band--stone{ background: var(--ivory); }
    .band-inner{ max-width: 72rem; margin: 0 auto; padding: 3rem 1rem; }

    /* Footer-logo maskina (väritettävä) */
    .logo-mask{
      width:36px; height:36px;
      background: var(--light-blue);
      -webkit-mask: url('assets/logo.svg') no-repeat center / contain;
      mask: url('assets/logo.svg') no-repeat center / contain;
    }
  </style>
</head>

<body>
  <!-- TAUSTAVIDEO -->
  <video id="bgVideo" class="bg-fixed"
         autoplay muted loop playsinline preload="auto"
         poster="assets/aurora-poster.jpg">
    <source src="assets/aurora.webm" type="video/webm">
    <source src="assets/aurora.mp4"  type="video/mp4">
  </video>

  <!-- HEADER (vaalea) -->
  <header class="fixed top-0 left-0 right-0 z-50">
    <div class="relative" style="background:var(--ivory); color:var(--ink); border-bottom:1px solid rgba(0,0,0,.08);">
      <div id="hdrRow" class="mx-auto max-w-6xl px-4 py-3 grid items-center gap-3">
        <!-- VASEN: logo + brändi -->
        <a id="brandBlock" href="#etusivu" class="flex items-center gap-3">
          <img alt="RUMAT STUDIO logo" class="h-9 w-9 object-contain" src="assets/logo.svg">
          <span id="brandText" class="uppercase text-sm tracking-widest">
            <span class="font-extrabold">RUMAT</span>&nbsp;<span class="font-normal">STUDIO</span>
          </span>
        </a>

        <!-- KESKI: nav (näkyy kun mahtuu) -->
        <nav id="mainNav">
          <a href="#etusivu"   class="hover:underline underline-offset-4 font-semibold">Etusivu</a>
          <a href="kaavat.html" class="hover:underline underline-offset-4 font-semibold">Kaavat</a>
          <a href="#tarina"    class="hover:underline underline-offset-4 font-semibold">Tarina</a>
          <a href="#blogi"     class="hover:underline underline-offset-4 font-semibold">Blogi</a>
          <a href="#some"      class="hover:underline underline-offset-4 font-semibold">Some</a>
          <a href="#yhteys"    class="hover:underline underline-offset-4 font-semibold">Yhteystiedot</a>
        </nav>

        <!-- OIKEA: ☰ + ostoskori (tekstinä TAI ikonina) -->
        <div id="rightBlock" class="flex items-center gap-2">
          <button id="openMenu" class="icon-btn hidden" aria-controls="menuDrawer" aria-expanded="false" aria-label="Valikko">
            <span aria-hidden="true" style="font-size:20px;line-height:1">☰</span>
            <span class="sr-only">Valikko</span>
          </button>

          <!-- Ostoskori TEKSTINÄ (nav mahtuu) -->
          <button id="openCartText" class="cart-text-btn">
            Ostoskori <span id="cartCountText" class="opacity-80"></span>
          </button>

          <!-- Ostoskori IKONINA (nav ei mahdu) -->
          <button id="openCartIcon" class="icon-btn hidden" aria-label="Ostoskori">
            <svg aria-hidden="true" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="20" r="1.8"></circle>
              <circle cx="17" cy="20" r="1.8"></circle>
              <path d="M3 4h2l2.2 10.2a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6L21 8H7.1"></path>
            </svg>
            <span class="badge" id="cartCount">0</span>
            <span class="sr-only">Ostoskori</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- SISÄLTÖ -->
  <main class="site-content">
    <!-- HERO -->
    <section id="etusivu" class="hero grid place-items-center px-4">
      <div id="hero-text" class="text-center mt-24 md:mt-28">
        <h1 class="serif font-semibold tracking-[0.08em] text-[clamp(22px,4.8vw,58px)]"
            style="text-shadow:0 2px 16px rgba(0,0,0,0.40)">
          Liian rumat ollakseen totta
        </h1>
        <div class="mt-8 flex justify-center">
          <img alt="RUMAT STUDIO logo" class="h-24 w-24 sm:h-28 sm:w-28 object-contain" src="assets/logo.svg">
        </div>
      </div>
    </section>

    <!-- Esittely -->
    <section class="py-0">
      <div class="band full-bleed">
        <div class="band-inner text-center">
          <p id="intro-text" class="text-xl sm:text-2xl">
            <strong>Luonnosta syntynyt. Reissuissa testattu.</strong>
            Suunnittelemani neuleet ja asusteet kulkevat mukana poluilla ja kaupungissa – jotta sinulla on päälläsi jotain, joka istuu, hengittää ja kestää jokaisella askeleella.
          </p>
        </div>
      </div>
    </section>
    <div class="aurora-gap full-bleed"></div>

    <!-- BLOGI -->
    <section id="blogi" class="py-0">
      <div class="band band--mist full-bleed">
        <div class="band-inner">
          <h2 class="serif text-3xl mb-6">Blogi</h2>
          <div id="blogRoot" class="grid gap-6"></div>
        </div>
      </div>
    </section>
    <div class="aurora-gap full-bleed"></div>

    <!-- SOME -->
    <section id="some" class="py-0">
      <div class="band full-bleed">
        <div class="band-inner">
          <h2 class="serif text-3xl mb-6">Some</h2>
          <div class="grid md:grid-cols-2 gap-6">
            <div class="aspect-[9/16] rounded-xl ring-1 ring-[rgba(0,0,0,.15)] overflow-hidden bg-black">
              <iframe id="igEmbed" class="w-full h-full" allowtransparency="true" frameborder="0" scrolling="no" loading="lazy"
                      src="https://www.instagram.com/p/DMXVRgGC1Bv/embed" style="display:block"></iframe>
            </div>
            <div class="aspect-[9/16] rounded-xl ring-1 ring-[rgba(0,0,0,.15)] overflow-hidden bg-black">
              <iframe id="ttEmbed"
                src="https://www.tiktok.com/embed/v2/7525414518562753814"
                style="width:100%;height:100%;border:0;display:block"
                allow="encrypted-media;"
                allowfullscreen
                title="TikTok video"></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div class="aurora-gap full-bleed"></div>

    <!-- TARINA -->
    <section id="tarina" class="py-0">
      <div class="band full-bleed">
        <div class="band-inner">
          <h2 class="serif text-3xl mb-4">Tarina</h2>
          <p id="story">
            Pienet erät. Kestävä käyttö. Pohjoiset sävyt. Jokainen vaate neulotaan käsin Suomussalmella yhden tekijän toimesta — jotta se kestää vuosia ja tekijä näkyy.
          </p>
        </div>
      </div>
    </section>
    <div class="aurora-gap full-bleed"></div>

    <!-- FOOTER -->
    <footer id="yhteys" class="pt-14 text-[color:var(--ivory)]" style="background:var(--olive)">
      <div class="mx-auto max-w-6xl px-4 grid sm:grid-cols-3 gap-8">
        <div class="flex items-start gap-3">
          <div class="logo-mask" aria-hidden="true"></div>
          <div>
            <div class="uppercase tracking-wide">RUMAT STUDIO</div>
            <div id="tagline" class="text-sm mt-1 text-white/80">Suomussalmi — Contemporary textiles, built to last.</div>
          </div>
        </div>
        <div>
          <h5 class="text-sm text-white/80">Yhteys</h5>
          <ul class="mt-2 space-y-2 text-sm">
            <li><a id="mailLink" href="mailto:hello@rumat.fi" class="hover:underline text-white">hello@rumat.fi</a></li>
            <li><a id="igLink" href="https://instagram.com/rumat.studio" target="_blank" rel="noreferrer" class="hover:underline text-white">Instagram</a></li>
            <li><a id="ttLink" href="https://www.tiktok.com/@rumat.studio" target="_blank" rel="noreferrer" class="hover:underline text-white">TikTok</a></li>
            <li id="location" class="text-white">Kauppakatu 20, 89600 Suomussalmi</li>
          </ul>
        </div>
        <div>
          <h5 class="text-sm text-white/80">Toimitus</h5>
          <ul class="mt-2 space-y-2 text-sm" id="shipInfo">
            <li class="text-white">Toimitus valitaan kassalla</li>
            <li class="text-white">Nouto (sovitusti) — 0 €</li>
            <li class="text-white">Posti — 6,90 €</li>
          </ul>
        </div>
      </div>
      <div class="py-8 text-center text-xs text-white/80">© <span id="year"></span> RUMAT STUDIO</div>
    </footer>
  </main>

  <!-- OSTOSKORI -->
  <div id="cartDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="closeCart" aria-label="Sulje ostoskori"></div>
    <div class="panel p-5 flex flex-col">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-semibold">Ostoskori</h3>
        <button id="closeCartX" class="text-stone-500 hover:text-stone-800">✕</button>
      </div>
      <div id="cartItems" class="flex-1 overflow-auto divide-y"></div>
      <div class="mt-4 space-y-3">
        <div>
          <div class="text-sm font-medium mb-1">Toimitus</div>
          <div id="shipOptions" class="space-y-1"></div>
        </div>
        <div class="text-sm grid grid-cols-2 gap-y-1">
          <div class="text-stone-600">Välisumma</div><div class="text-right" id="subTotal">€0,00</div>
          <div class="text-stone-600">Toimitus</div><div class="text-right" id="shipTotal">€0,00</div>
          <div class="font-semibold">Yhteensä</div><div class="text-right font-semibold" id="grandTotal">€0,00</div>
        </div>
        <button id="checkout" class="btn btn-dark w-full">Maksa PayPalilla</button>
        <div id="paypalWarn" class="text-xs text-stone-500"></div>
      </div>
    </div>
  </div>

  <!-- VALIKKO (vasemmalta) -->
  <div id="menuDrawer" class="drawer" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="closeMenu" aria-label="Sulje valikko"></div>
    <div class="panel p-6 flex flex-col gap-4">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-semibold">Valikko</h3>
        <button id="closeMenuX" class="text-stone-500 hover:text-stone-800">✕</button>
      </div>
      <nav class="flex flex-col gap-3 text-lg">
        <a href="#etusivu"   class="py-2 border-b" data-menu-close>Etusivu</a>
        <a href="kaavat.html" class="py-2 border-b" data-menu-close>Kaavat</a>
        <a href="#tarina"    class="py-2 border-b" data-menu-close>Tarina</a>
        <a href="#blogi"     class="py-2 border-b" data-menu-close>Blogi</a>
        <a href="#some"      class="py-2 border-b" data-menu-close>Some</a>
        <a href="#yhteys"    class="py-2"          data-menu-close>Yhteystiedot</a>
      </nav>
    </div>
  </div>

  <!-- SUCCESS/CANCEL MODAL -->
  <div id="resultModal" class="modal">
    <div class="bg-white rounded-2xl p-6 shadow-soft w-[min(92vw,480px)] text-center">
      <h3 id="resultTitle" class="serif text-2xl mb-2">Kiitos tilauksesta!</h3>
      <p id="resultText" class="text-stone-600">Vahvistus saapuu sähköpostiisi.</p>
      <a href="#" class="btn btn-dark mt-4 inline-block">Takaisin etusivulle</a>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
  const API_BASE = "";
  const fmtEUR = x => new Intl.NumberFormat('fi-FI',{style:'currency',currency:'EUR'}).format(x);
  const $ = sel => document.querySelector(sel);
  const el = (tag,attrs={},...kids)=>{ const n=document.createElement(tag);
    Object.entries(attrs).forEach(([k,v])=>{
      if(k==='class') n.className=v;
      else if(k==='html') n.innerHTML=v;
      else if(k.startsWith('on')) n.addEventListener(k.slice(2),v);
      else n.setAttribute(k,v);
    });
    kids.forEach(k=>{ if(k==null) return; if(typeof k==='string') n.appendChild(document.createTextNode(k)); else n.appendChild(k);});
    return n; };

  // Hero-parallax
  (function(){
    const hero   = document.getElementById('etusivu');
    const textEl = document.getElementById('hero-text');
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();
    if (!hero || !textEl) return;

    let heroTop = 0, heroHeight = 1, amplitudePx = 0;
    let ticking = false, lastScrollY = 0, reduceMotion = false;

    function recalc(){
      const rect = hero.getBoundingClientRect();
      heroTop = rect.top + (window.scrollY || window.pageYOffset || 0);
      heroHeight = Math.max(1, hero.offsetHeight);
      amplitudePx = heroHeight * 0.18;
    }
    const clamp = (v,min,max)=>Math.min(max,Math.max(min,v));
    const easeOutQuad = t => 1 - (1 - t) * (1 - t);

    function update(){
      ticking = false;
      if (reduceMotion){ textEl.style.transform = 'translate3d(0,0,0)'; return; }
      const y = lastScrollY;
      const p = clamp((y - heroTop) / heroHeight, 0, 1);
      const eased = easeOutQuad(clamp(p / 0.9, 0, 1));
      const ty = -amplitudePx * eased;
      textEl.style.transform = `translate3d(0, ${ty}px, 0)`;
    }
    function onScroll(){ lastScrollY = window.scrollY || window.pageYOffset || 0; if (!ticking){ ticking = true; requestAnimationFrame(update); } }
    function onResize(){ recalc(); onScroll(); }

    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    reduceMotion = mq.matches;
    mq.addEventListener?.('change', e => { reduceMotion = e.matches; onScroll(); });

    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', ()=>requestAnimationFrame(onResize), {passive:true});
    if (window.visualViewport){ window.visualViewport.addEventListener('resize', ()=>requestAnimationFrame(onResize), {passive:true}); }
    if ('fonts' in document){ document.fonts.ready.then(()=>{ recalc(); onScroll(); }); }
    recalc(); onScroll();
  })();

  // ----- CMS / sisältö -----
  const defaultContent = {
    hero:{ headline:"Liian rumat ollakseen totta" },
    paypalBusiness:"",
    contact:{
      email:"hello@rumat.fi",
      instagram:"https://instagram.com/rumat.studio",
      tiktok:"https://www.tiktok.com/@rumat.studio",
      location:"Kauppakatu 20, 89600 Suomussalmi"
    },
    embed:{ instagramPost:"https://www.instagram.com/p/DMXVRgGC1Bv/embed", tiktokVideo:"https://www.tiktok.com/@rumat.studio/video/7525414518562753814" },
    pitch:"Luonnosta syntynyt. Reissuissa testattu. Suunnittelemani neuleet ja asusteet kulkevat mukana poluilla ja kaupungissa – jotta sinulla on päälläsi jotain, joka istuu, hengittää ja kestää jokaisella askeleella.",
    story:"Pienet erät. Kestävä käyttö. Pohjoiset sävyt. Jokainen vaate neulotaan käsin Suomussalmella yhden tekijän toimesta — jotta se kestää vuosia ja tekijä näkyy.",
    products:[], /* Etusivulla ei listata kaavoja */
    payment:{ shipping:{ methods:[
      { id:"PICKUP", name:"Nouto (sovitusti)", price:"€0,00" },
      { id:"POSTI",  name:"Posti",             price:"€6,90" }
    ], defaultMethodId:"PICKUP" } },
    blog:[{ title:"Matka rumaan kauneuteen", body:"Olen aina etsinyt materiaaleja, jotka kestävät oikeaa elämää: reissujen sateet, rinkan hiertämät olkaimet, kaupunkipäivien nopeat käännökset. RUMAT syntyi siitä, että vaatteiden pitää tehdä työnsä — hengittää, istua ja kestää — ilman turhaa selittelyä. Kaikki mallini syntyvät metsässä ja kaupungissa testaten, kunnes ne toimivat juuri niin kuin pitää." }]
  };

  let CONTENT = structuredClone(defaultContent);

  async function loadContent
